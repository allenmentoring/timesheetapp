define(['app/base', 'angularjs', 'fbase'], function(TimeSheetApp) {
  var DashBoardController;
  DashBoardController = (function() {
    function DashBoardController($scope, $rootScope, $sce, FirebaseService, $window, $firebaseObject, $firebaseArray) {
      $scope.startDate = moment().date(5).startOf('day');
      $scope.endDate = moment().date(5).endOf('day').add(13, 'd');
      $scope.formattedStart = $scope.startDate.format('M/D/YY');
      $scope.formattedEnd = $scope.endDate.format('M/D/YY');
      $scope.lessonModel = {
        student: "",
        length: "",
        notes: ""
      };
      FirebaseService.rootRef.child('students').once("value", function(snap) {
        var k, students, v, _ref;
        students = [];
        _ref = snap.val();
        for (k in _ref) {
          v = _ref[k];
          students.push({
            id: k,
            name: v.firstName + " " + v.lastName
          });
        }
        return $scope.$apply(function() {
          return $scope.students = students;
        });
      });
      $rootScope.$watch('userBasic', function(newVal, oldVal) {
        if ($rootScope.userBasic) {
          if (!($rootScope.userBasic.manager || $rootScope.userBasic.mentor)) {
            return $rootScope.roleNotSet = true;
          } else {
            return $scope.loadDashboard();
          }
        }
      });
      $scope.loadDashboard = function() {
        var datepickerSelector, endM, maxDate, minDate, startM, str;
        if ($rootScope.userBasic.manager) {
          $scope.selectedTab = 'TIMESHEETS';
          $scope.currentDash = 'Manager';
          return $scope.mentors = $firebaseObject(FirebaseService.rootRef.child('users').startAt('manager').endAt('manager'));
        } else {
          $scope.currentDash = 'Mentor';
          startM = moment($scope.formattedStart, 'M/D/YY');
          endM = moment($scope.formattedEnd, 'M/D/YY');
          str = (moment($scope.formattedStart, 'M/D/YY').format("MMMM Do YYYY")) + "-" + (moment($scope.formattedEnd, 'M/D/YY').format("MMMM Do YYYY"));
          $scope.currentTimeSheet = $firebaseObject($rootScope.currentUserRef.child("timesheets/" + str + "/lessons"));
          $scope.currentTimeSheetSubmitted = $firebaseObject($rootScope.currentUserRef.child("timesheets/" + str + "/submitted"));
          minDate = new Date(startM.year(), startM.month(), startM.date());
          maxDate = new Date(endM.year(), endM.month(), endM.date());
          datepickerSelector = $('#datepicker-01');
          datepickerSelector.datepicker({
            showOtherMonths: true,
            selectOtherMonths: true,
            minDate: minDate,
            maxDate: maxDate,
            dateFormat: 'm/d/yy',
            yearRange: '-1:+1'
          }).prev('.input-group-btn').on('click', function(e) {
            e && e.preventDefault();
            datepickerSelector.focus();
          });
          $.extend($.datepicker, {
            _checkOffset: function(inst, offset, isFixed) {
              return offset;
            }
          });
          return datepickerSelector.datepicker('widget').css({
            'margin-left': -datepickerSelector.prev('.input-group-btn').find('.btn').outerWidth() + 3
          });
        }
      };
      $scope.reRenderDatePicker = function() {
        var endM, maxDate, minDate, startM;
        startM = moment($scope.formattedStart, 'M/D/YY');
        endM = moment($scope.formattedEnd, 'M/D/YY');
        minDate = new Date(startM.year(), startM.month(), startM.date());
        maxDate = new Date(endM.year(), endM.month(), endM.date());
        $('#datepicker-01').datepicker("option", "maxDate", maxDate);
        $('#datepicker-01').datepicker("option", "minDate", minDate);
      };
      $scope.openTimesheetsTab = function() {
        return $scope.selectedTab = 'TIMESHEETS';
      };
      $scope.formatLabel = function(item) {
        if (item) {
          return item.name;
        }
      };
      $scope.openInvoicesTab = function() {
        return $scope.selectedTab = 'INVOICES';
      };
      $scope.nextPeriod = function() {
        var oldEndDate, str;
        oldEndDate = $scope.endDate;
        $scope.startDate = oldEndDate;
        $scope.formattedStart = $scope.startDate.format('M/D/YY');
        $scope.endDate = $scope.startDate.add(13, 'd');
        $scope.formattedEnd = $scope.endDate.format('M/D/YY');
        $scope.reRenderDatePicker();
        if ($scope.currentDash === 'Mentor') {
          if ($scope.currentTimeSheet) {
            $scope.currentTimeSheet.$destroy();
          }
          str = (moment($scope.formattedStart, 'M/D/YY').format("MMMM Do YYYY")) + "-" + (moment($scope.formattedEnd, 'M/D/YY').format("MMMM Do YYYY"));
          $scope.currentTimeSheet = $firebaseObject($rootScope.currentUserRef.child("timesheets/" + str + "/lessons"));
          return $scope.currentTimeSheetSubmitted = $firebaseObject($rootScope.currentUserRef.child("timesheets/" + str + "/submitted"));
        }
      };
      $scope.prevPeriod = function() {
        var str;
        $scope.startDate = moment($scope.formattedStart, 'M/D/YY').subtract(13, 'd');
        $scope.formattedStart = $scope.startDate.format('M/D/YY');
        $scope.endDate = moment($scope.formattedEnd, 'M/D/YY').subtract(13, 'd');
        $scope.formattedEnd = $scope.endDate.format('M/D/YY');
        $scope.reRenderDatePicker();
        if ($scope.currentDash === 'Mentor') {
          if ($scope.currentTimeSheet) {
            $scope.currentTimeSheet.$destroy();
          }
          str = (moment($scope.formattedStart, 'M/D/YY').format("MMMM Do YYYY")) + "-" + (moment($scope.formattedEnd, 'M/D/YY').format("MMMM Do YYYY"));
          $scope.currentTimeSheet = $firebaseObject($rootScope.currentUserRef.child("timesheets/" + str + "/lessons"));
          return $scope.currentTimeSheetSubmitted = $firebaseObject($rootScope.currentUserRef.child("timesheets/" + str + "/submitted"));
        }
      };
      $scope.addLesson = function() {
        var currentTimeSheet;
        if ($scope.lessonModel.student.id && $scope.lessonModel.length.length > 0 && $('#datepicker-01').val().length > 0) {
          currentTimeSheet = (moment($scope.formattedStart, 'M/D/YY').format("MMMM Do YYYY")) + "-" + (moment($scope.formattedEnd, 'M/D/YY').format("MMMM Do YYYY"));
          $scope.lessonModel.date = moment($('#datepicker-01').val(), 'M/D/YY').format("MMMM Do YYYY");
          $rootScope.currentUserRef.child("timesheets/" + currentTimeSheet + "/lessons").push().set($scope.lessonModel);
          return $scope.lessonModel = {
            student: "",
            length: "",
            notes: ""
          };
        }
      };
      $scope.removeLesson = function(id) {
        var str;
        str = (moment($scope.formattedStart, 'M/D/YY').format("MMMM Do YYYY")) + "-" + (moment($scope.formattedEnd, 'M/D/YY').format("MMMM Do YYYY"));
        return $rootScope.currentUserRef.child("timesheets/" + str + "/lessons/" + id).set(null);
      };
      $scope.submitTimeSheet = function() {
        var result, str;
        result = confirm("Are you sure?");
        if (result) {
          str = (moment($scope.formattedStart, 'M/D/YY').format("MMMM Do YYYY")) + "-" + (moment($scope.formattedEnd, 'M/D/YY').format("MMMM Do YYYY"));
          return $rootScope.currentUserRef.child("timesheets/" + str + "/submitted").set(true);
        }
      };
    }

    return DashBoardController;

  })();
  DashBoardController.$inject = ["$scope", "$rootScope", "$sce", "FirebaseService", "$window", "$firebaseObject", "$firebaseArray"];
  TimeSheetApp.controller('DashBoardController', DashBoardController);
  return DashBoardController;
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2tyaXNobmFyb2toYWxlL2NvZGUvbGV2ZWwvbGV2ZWwvdGltZXNoZWV0YXBwL3B1YmxpYy9qYXZhc2NyaXB0cy9hcHAvY29udHJvbGxlcnMvZGFzaGJvYXJkX2NvbnRyb2xsZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMva3Jpc2huYXJva2hhbGUvY29kZS9sZXZlbC9sZXZlbC90aW1lc2hlZXRhcHAvYXNzZXRzL2phdmFzY3JpcHRzL2FwcC9jb250cm9sbGVycy9kYXNoYm9hcmRfY29udHJvbGxlci5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsTUFBQSxDQUFPLENBQUUsVUFBRixFQUFhLFdBQWIsRUFBMEIsT0FBMUIsQ0FBUCxFQUEwQyxTQUFDLFlBQUQsR0FBQTtBQUV4QyxNQUFBLG1CQUFBO0FBQUEsRUFBTTtBQUVTLElBQUEsNkJBQUMsTUFBRCxFQUFTLFVBQVQsRUFBcUIsSUFBckIsRUFBMkIsZUFBM0IsRUFBNEMsT0FBNUMsRUFBcUQsZUFBckQsRUFBc0UsY0FBdEUsR0FBQTtBQUVYLE1BQUEsTUFBTSxDQUFDLFNBQVAsR0FBbUIsTUFBQSxDQUFBLENBQVEsQ0FBQyxJQUFULENBQWMsQ0FBZCxDQUFnQixDQUFDLE9BQWpCLENBQTBCLEtBQTFCLENBQW5CLENBQUE7QUFBQSxNQUNBLE1BQU0sQ0FBQyxPQUFQLEdBQWlCLE1BQUEsQ0FBQSxDQUFRLENBQUMsSUFBVCxDQUFjLENBQWQsQ0FBZ0IsQ0FBQyxLQUFqQixDQUF3QixLQUF4QixDQUE2QixDQUFDLEdBQTlCLENBQWtDLEVBQWxDLEVBQXVDLEdBQXZDLENBRGpCLENBQUE7QUFBQSxNQUdBLE1BQU0sQ0FBQyxjQUFQLEdBQXdCLE1BQU0sQ0FBQyxTQUFTLENBQUMsTUFBakIsQ0FBeUIsUUFBekIsQ0FIeEIsQ0FBQTtBQUFBLE1BSUEsTUFBTSxDQUFDLFlBQVAsR0FBc0IsTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUFmLENBQXVCLFFBQXZCLENB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dEIsQ0FBQTtBQUFBLE1BaUlBLE1BQU0sQ0FBQyxlQUFQLEdBQXlCLFNBQUEsR0FBQTtBQUN2QixZQUFBLFdBQUE7QUFBQSxRQUFBLE1BQUEsR0FBUyxPQUFBLENBQVMsZUFBVCxDQUFULENBQUE7QUFDQSxRQUFBLElBQUcsTUFBSDtBQUNFLFVBQUEsR0FBQSxHQUFRLENBQUMsTUFBQSxDQUFPLE1BQU0sQ0FBQyxjQUFkLEVBQStCLFFBQS9CLENBQXVDLENBQUMsTUFBeEMsQ0FBZ0QsY0FBaEQsQ0FBRCxDQUFBLEdBQWdFLEdBQWhFLEdBQWtFLENBQUMsTUFBQSxDQUFPLE1BQU0sQ0FBQyxZQUFkLEVBQTZCLFFBQTdCLENBQXFDLENBQUMsTUFBdEMsQ0FBOEMsY0FBOUMsQ0FBRCxDQUExRSxDQUFBO2lCQUNBLFVBQVUsQ0FBQyxjQUFjLENBQUMsS0FBMUIsQ0FBaUMsYUFBQSxHQUFhLEdBQWIsR0FBaUIsWUFBbEQsQ0FBOEQsQ0FBQyxHQUEvRCxDQUFtRSxJQUFuRSxFQUZGO1NBRnVCO01BQUEsQ0FqSXpCLENBRlc7SUFBQSxDQUFiOzsrQkFBQTs7TUFGRixDQUFBO0FBQUEsRUFpSkEsbUJBQW1CLENBQUMsT0FBcEIsR0FBOEIsQ0FBRSxRQUFGLEVBQVksWUFBWixFQUEwQixNQUExQixFQUFrQyxpQkFBbEMsRUFBcUQsU0FBckQsRUFBZ0UsaUJBQWhFLEVBQW1GLGdCQUFuRixDQWpKOUIsQ0FBQTtBQUFBLEVBbUpBLFlBQVksQ0FBQyxVQUFiLENBQXlCLHFCQUF6QixFQUErQyxtQkFBL0MsQ0FuSkEsQ0FBQTtTQXFKQSxvQkF2SndDO0FBQUEsQ0FBMUMsQ0FBQSxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiXG5kZWZpbmUgWydhcHAvYmFzZScsJ2FuZ3VsYXJqcycsICdmYmFzZSddLCAoVGltZVNoZWV0QXBwKSAtPlxuXG4gIGNsYXNzIERhc2hCb2FyZENvbnRyb2xsZXJcblxuICAgIGNvbnN0cnVjdG9yOiAoJHNjb3BlLCAkcm9vdFNjb3BlLCAkc2NlLCBGaXJlYmFzZVNlcnZpY2UsICR3aW5kb3csICRmaXJlYmFzZU9iamVjdCwgJGZpcmViYXNlQXJyYXkpIC0+XG5cbiAgICAgICRzY29wZS5zdGFydERhdGUgPSBtb21lbnQoKS5kYXRlKDUpLnN0YXJ0T2YoJ2RheScpXG4gICAgICAkc2NvcGUuZW5kRGF0ZSA9IG1vbWVudCgpLmRhdGUoNSkuZW5kT2YoJ2RheScpLmFkZCgxMywgJ2QnKVxuXG4gICAgICAkc2NvcGUuZm9ybWF0dGVkU3RhcnQgPSAkc2NvcGUuc3RhcnREYXRlLmZvcm1hdCgnTS9EL1lZJylcbiAgICAgICRzY29wZS5mb3JtYXR0ZWRFbmQgPSAkc2NvcGUuZW5kRGF0ZS5mb3JtYXQoJ00vRC9ZWScpXG5cblxuICAgICAgJHNjb3BlLmxlc3Nvbk1vZGVsID0ge3N0dWRlbnQ6IFwiXCIsIGxlbmd0aDogXCJcIiwgbm90ZXM6IFwiXCJ9XG5cbiAgICAgIEZpcmViYXNlU2VydmljZS5yb290UmVmLmNoaWxkKCdzdHVkZW50cycpLm9uY2UgXCJ2YWx1ZVwiLCAoc25hcCkgLT5cbiAgICAgICAgc3R1ZGVudHMgPSBbXVxuICAgICAgICBmb3Igayx2IG9mIHNuYXAudmFsKClcbiAgICAgICAgICBzdHVkZW50cy5wdXNoIHtpZDogaywgbmFtZTogXCIje3YuZmlyc3ROYW1lfSAje3YubGFzdE5hbWV9XCJ9XG5cbiAgICAgICAgJHNjb3BlLiRhcHBseSAtPlxuICAgICAgICAgICRzY29wZS5zdHVkZW50cyA9IHN0dWRlbnRzXG5cblxuICAgICAgJHJvb3RTY29wZS4kd2F0Y2ggJ3VzZXJCYXNpYycsIChuZXdWYWwsIG9sZFZhbCkgLT5cbiAgICAgICAgaWYgJHJvb3RTY29wZS51c2VyQmFzaWNcbiAgICAgICAgICB1bmxlc3MgJHJvb3RTY29wZS51c2VyQmFzaWMubWFuYWdlciB8fCAkcm9vdFNjb3BlLnVzZXJCYXNpYy5tZW50b3JcbiAgICAgICAgICAgICRyb290U2NvcGUucm9sZU5vdFNldCA9IHRydWVcbiAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAkc2NvcGUubG9hZERhc2hib2FyZCgpXG5cblxuXG5cblxuICAgICAgJHNjb3BlLmxvYWREYXNoYm9hcmQgPSAoKSAtPlxuICAgICAgICBpZiAkcm9vdFNjb3BlLnVzZXJCYXNpYy5tYW5hZ2VyXG4gICAgICAgICAgJHNjb3BlLnNlbGVjdGVkVGFiID0gJ1RJTUVTSEVFVFMnXG4gICAgICAgICAgJHNjb3BlLmN1cnJlbnREYXNoID0gJ01hbmFnZXInXG4gICAgICAgICAgJHNjb3BlLm1lbnRvcnMgPSAkZmlyZWJhc2VPYmplY3QoRmlyZWJhc2VTZXJ2aWNlLnJvb3RSZWYuY2hpbGQoJ3VzZXJzJykuc3RhcnRBdCgnbWFuYWdlcicpLmVuZEF0KCdtYW5hZ2VyJykpXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAkc2NvcGUuY3VycmVudERhc2ggPSAnTWVudG9yJ1xuXG4gICAgICAgICAgc3RhcnRNID0gbW9tZW50KCRzY29wZS5mb3JtYXR0ZWRTdGFydCwgJ00vRC9ZWScpXG4gICAgICAgICAgZW5kTSA9IG1vbWVudCgkc2NvcGUuZm9ybWF0dGVkRW5kLCAnTS9EL1lZJylcblxuICAgICAgICAgIHN0ciA9IFwiI3ttb21lbnQoJHNjb3BlLmZvcm1hdHRlZFN0YXJ0LCAnTS9EL1lZJykuZm9ybWF0KFwiTU1NTSBEbyBZWVlZXCIpfS0je21vbWVudCgkc2NvcGUuZm9ybWF0dGVkRW5kLCAnTS9EL1lZJykuZm9ybWF0KFwiTU1NTSBEbyBZWVlZXCIpfVwiXG4gICAgICAgICAgJHNjb3BlLmN1cnJlbnRUaW1lU2hlZXQgPSAkZmlyZWJhc2VPYmplY3QoJHJvb3RTY29wZS5jdXJyZW50VXNlclJlZi5jaGlsZChcInRpbWVzaGVldHMvI3tzdHJ9L2xlc3NvbnNcIikpXG4gICAgICAgICAgJHNjb3BlLmN1cnJlbnRUaW1lU2hlZXRTdWJtaXR0ZWQgPSAkZmlyZWJhc2VPYmplY3QoJHJvb3RTY29wZS5jdXJyZW50VXNlclJlZi5jaGlsZChcInRpbWVzaGVldHMvI3tzdHJ9L3N1Ym1pdHRlZFwiKSlcblxuICAgICAgICAgIG1pbkRhdGUgPSBuZXcgRGF0ZShzdGFydE0ueWVhcigpLCBzdGFydE0ubW9udGgoKSwgc3RhcnRNLmRhdGUoKSlcbiAgICAgICAgICBtYXhEYXRlID0gbmV3IERhdGUoZW5kTS55ZWFyKCksIGVuZE0ubW9udGgoKSwgZW5kTS5kYXRlKCkpXG5cbiAgICAgICAgICBkYXRlcGlja2VyU2VsZWN0b3IgPSAkKCcjZGF0ZXBpY2tlci0wMScpXG4gICAgICAgICAgZGF0ZXBpY2tlclNlbGVjdG9yLmRhdGVwaWNrZXIoXG4gICAgICAgICAgICBzaG93T3RoZXJNb250aHM6IHRydWVcbiAgICAgICAgICAgIHNlbGVjdE90aGVyTW9udGhzOiB0cnVlXG4gICAgICAgICAgICBtaW5EYXRlOiBtaW5EYXRlXG4gICAgICAgICAgICBtYXhEYXRlOiBtYXhEYXRlXG4gICAgICAgICAgICBkYXRlRm9ybWF0OiAnbS9kL3l5J1xuICAgICAgICAgICAgeWVhclJhbmdlOiAnLTE6KzEnKS5wcmV2KCcuaW5wdXQtZ3JvdXAtYnRuJykub24gJ2NsaWNrJywgKGUpIC0+XG4gICAgICAgICAgICAgIGUgYW5kIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgICBkYXRlcGlja2VyU2VsZWN0b3IuZm9jdXMoKVxuICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAkLmV4dGVuZCAkLmRhdGVwaWNrZXIsIF9jaGVja09mZnNldDogKGluc3QsIG9mZnNldCwgaXNGaXhlZCkgLT5cbiAgICAgICAgICAgIG9mZnNldFxuICAgICAgICAgIGRhdGVwaWNrZXJTZWxlY3Rvci5kYXRlcGlja2VyKCd3aWRnZXQnKS5jc3MgJ21hcmdpbi1sZWZ0JzogLWRhdGVwaWNrZXJTZWxlY3Rvci5wcmV2KCcuaW5wdXQtZ3JvdXAtYnRuJykuZmluZCgnLmJ0bicpLm91dGVyV2lkdGgoKSArIDNcblxuICAgICAgJHNjb3BlLnJlUmVuZGVyRGF0ZVBpY2tlciA9ICgpIC0+XG4gICAgICAgIHN0YXJ0TSA9IG1vbWVudCgkc2NvcGUuZm9ybWF0dGVkU3RhcnQsICdNL0QvWVknKVxuICAgICAgICBlbmRNID0gbW9tZW50KCRzY29wZS5mb3JtYXR0ZWRFbmQsICdNL0QvWVknKVxuXG4gICAgICAgIG1pbkRhdGUgPSBuZXcgRGF0ZShzdGFydE0ueWVhcigpLCBzdGFydE0ubW9udGgoKSwgc3RhcnRNLmRhdGUoKSlcbiAgICAgICAgbWF4RGF0ZSA9IG5ldyBEYXRlKGVuZE0ueWVhcigpLCBlbmRNLm1vbnRoKCksIGVuZE0uZGF0ZSgpKVxuICAgICAgICAkKCcjZGF0ZXBpY2tlci0wMScpLmRhdGVwaWNrZXIoIFwib3B0aW9uXCIsIFwibWF4RGF0ZVwiLCBtYXhEYXRlIClcbiAgICAgICAgJCgnI2RhdGVwaWNrZXItMDEnKS5kYXRlcGlja2VyKCBcIm9wdGlvblwiLCBcIm1pbkRhdGVcIiwgbWluRGF0ZSApXG4gICAgICAgIHJldHVyblxuXG5cblxuICAgICAgJHNjb3BlLm9wZW5UaW1lc2hlZXRzVGFiID0gKCkgLT5cbiAgICAgICAgJHNjb3BlLnNlbGVjdGVkVGFiID0gJ1RJTUVTSEVFVFMnXG5cblxuICAgICAgJHNjb3BlLmZvcm1hdExhYmVsID0gKGl0ZW0pIC0+XG4gICAgICAgIGl0ZW0ubmFtZSBpZiBpdGVtXG5cblxuICAgICAgJHNjb3BlLm9wZW5JbnZvaWNlc1RhYiA9ICgpIC0+XG4gICAgICAgICRzY29wZS5zZWxlY3RlZFRhYiA9ICdJTlZPSUNFUydcblxuXG4gICAgICAkc2NvcGUubmV4dFBlcmlvZCA9ICgpIC0+XG4gICAgICAgIG9sZEVuZERhdGUgPSAkc2NvcGUuZW5kRGF0ZVxuICAgICAgICAkc2NvcGUuc3RhcnREYXRlID0gb2xkRW5kRGF0ZVxuICAgICAgICAkc2NvcGUuZm9ybWF0dGVkU3RhcnQgPSAkc2NvcGUuc3RhcnREYXRlLmZvcm1hdCgnTS9EL1lZJylcblxuICAgICAgICAkc2NvcGUuZW5kRGF0ZSA9ICRzY29wZS5zdGFydERhdGUuYWRkKDEzLCAnZCcpXG4gICAgICAgICRzY29wZS5mb3JtYXR0ZWRFbmQgPSAkc2NvcGUuZW5kRGF0ZS5mb3JtYXQoJ00vRC9ZWScpXG4gICAgICAgICRzY29wZS5yZVJlbmRlckRhdGVQaWNrZXIoKVxuXG4gICAgICAgIGlmICRzY29wZS5jdXJyZW50RGFzaCA9PSAnTWVudG9yJ1xuICAgICAgICAgICRzY29wZS5jdXJyZW50VGltZVNoZWV0LiRkZXN0cm95KCkgaWYgJHNjb3BlLmN1cnJlbnRUaW1lU2hlZXRcbiAgICAgICAgICBzdHIgPSBcIiN7bW9tZW50KCRzY29wZS5mb3JtYXR0ZWRTdGFydCwgJ00vRC9ZWScpLmZvcm1hdChcIk1NTU0gRG8gWVlZWVwiKX0tI3ttb21lbnQoJHNjb3BlLmZvcm1hdHRlZEVuZCwgJ00vRC9ZWScpLmZvcm1hdChcIk1NTU0gRG8gWVlZWVwiKX1cIlxuICAgICAgICAgICRzY29wZS5jdXJyZW50VGltZVNoZWV0ID0gJGZpcmViYXNlT2JqZWN0KCRyb290U2NvcGUuY3VycmVudFVzZXJSZWYuY2hpbGQoXCJ0aW1lc2hlZXRzLyN7c3RyfS9sZXNzb25zXCIpKVxuICAgICAgICAgICRzY29wZS5jdXJyZW50VGltZVNoZWV0U3VibWl0dGVkID0gJGZpcmViYXNlT2JqZWN0KCRyb290U2NvcGUuY3VycmVudFVzZXJSZWYuY2hpbGQoXCJ0aW1lc2hlZXRzLyN7c3RyfS9zdWJtaXR0ZWRcIikpXG5cblxuICAgICAgJHNjb3BlLnByZXZQZXJpb2QgPSAoKSAtPlxuICAgICAgICAkc2NvcGUuc3RhcnREYXRlID0gbW9tZW50KCRzY29wZS5mb3JtYXR0ZWRTdGFydCwgJ00vRC9ZWScpLnN1YnRyYWN0KDEzLCAnZCcpXG4gICAgICAgICRzY29wZS5mb3JtYXR0ZWRTdGFydCA9ICRzY29wZS5zdGFydERhdGUuZm9ybWF0KCdNL0QvWVknKVxuXG4gICAgICAgICRzY29wZS5lbmREYXRlID0gbW9tZW50KCRzY29wZS5mb3JtYXR0ZWRFbmQsICdNL0QvWVknKS5zdWJ0cmFjdCgxMywgJ2QnKVxuICAgICAgICAkc2NvcGUuZm9ybWF0dGVkRW5kID0gJHNjb3BlLmVuZERhdGUuZm9ybWF0KCdNL0QvWVknKVxuICAgICAgICAkc2NvcGUucmVSZW5kZXJEYXRlUGlja2VyKClcblxuICAgICAgICBpZiAkc2NvcGUuY3VycmVudERhc2ggPT0gJ01lbnRvcidcbiAgICAgICAgICAkc2NvcGUuY3VycmVudFRpbWVTaGVldC4kZGVzdHJveSgpIGlmICRzY29wZS5jdXJyZW50VGltZVNoZWV0XG4gICAgICAgICAgc3RyID0gXCIje21vbWVudCgkc2NvcGUuZm9ybWF0dGVkU3RhcnQsICdNL0QvWVknKS5mb3JtYXQoXCJNTU1NIERvIFlZWVlcIil9LSN7bW9tZW50KCRzY29wZS5mb3JtYXR0ZWRFbmQsICdNL0QvWVknKS5mb3JtYXQoXCJNTU1NIERvIFlZWVlcIil9XCJcbiAgICAgICAgICAkc2NvcGUuY3VycmVudFRpbWVTaGVldCA9ICRmaXJlYmFzZU9iamVjdCgkcm9vdFNjb3BlLmN1cnJlbnRVc2VyUmVmLmNoaWxkKFwidGltZXNoZWV0cy8je3N0cn0vbGVzc29uc1wiKSlcbiAgICAgICAgICAkc2NvcGUuY3VycmVudFRpbWVTaGVldFN1Ym1pdHRlZCA9ICRmaXJlYmFzZU9iamVjdCgkcm9vdFNjb3BlLmN1cnJlbnRVc2VyUmVmLmNoaWxkKFwidGltZXNoZWV0cy8je3N0cn0vc3VibWl0dGVkXCIpKVxuXG5cbiAgICAgICRzY29wZS5hZGRMZXNzb24gPSAoKSAtPlxuICAgICAgICBpZiAkc2NvcGUubGVzc29uTW9kZWwuc3R1ZGVudC5pZCBhbmQgJHNjb3BlLmxlc3Nvbk1vZGVsLmxlbmd0aC5sZW5ndGggPiAwIGFuZCAkKCcjZGF0ZXBpY2tlci0wMScpLnZhbCgpLmxlbmd0aCA+IDBcbiAgICAgICAgICBjdXJyZW50VGltZVNoZWV0ID0gXCIje21vbWVudCgkc2NvcGUuZm9ybWF0dGVkU3RhcnQsICdNL0QvWVknKS5mb3JtYXQoXCJNTU1NIERvIFlZWVlcIil9LSN7bW9tZW50KCRzY29wZS5mb3JtYXR0ZWRFbmQsICdNL0QvWVknKS5mb3JtYXQoXCJNTU1NIERvIFlZWVlcIil9XCJcbiAgICAgICAgICAkc2NvcGUubGVzc29uTW9kZWwuZGF0ZSA9IG1vbWVudCgkKCcjZGF0ZXBpY2tlci0wMScpLnZhbCgpLCAnTS9EL1lZJykuZm9ybWF0KFwiTU1NTSBEbyBZWVlZXCIpXG4gICAgICAgICAgJHJvb3RTY29wZS5jdXJyZW50VXNlclJlZi5jaGlsZChcInRpbWVzaGVldHMvI3tjdXJyZW50VGltZVNoZWV0fS9sZXNzb25zXCIpLnB1c2goKS5zZXQgJHNjb3BlLmxlc3Nvbk1vZGVsXG4gICAgICAgICAgJHNjb3BlLmxlc3Nvbk1vZGVsID0ge3N0dWRlbnQ6IFwiXCIsIGxlbmd0aDogXCJcIiwgbm90ZXM6IFwiXCJ9XG5cblxuICAgICAgJHNjb3BlLnJlbW92ZUxlc3NvbiA9IChpZCkgLT5cbiAgICAgICAgc3RyID0gXCIje21vbWVudCgkc2NvcGUuZm9ybWF0dGVkU3RhcnQsICdNL0QvWVknKS5mb3JtYXQoXCJNTU1NIERvIFlZWVlcIil9LSN7bW9tZW50KCRzY29wZS5mb3JtYXR0ZWRFbmQsICdNL0QvWVknKS5mb3JtYXQoXCJNTU1NIERvIFlZWVlcIil9XCJcbiAgICAgICAgJHJvb3RTY29wZS5jdXJyZW50VXNlclJlZi5jaGlsZChcInRpbWVzaGVldHMvI3tzdHJ9L2xlc3NvbnMvI3tpZH1cIikuc2V0IG51bGxcblxuICAgICAgJHNjb3BlLnN1Ym1pdFRpbWVTaGVldCA9ICgpIC0+XG4gICAgICAgIHJlc3VsdCA9IGNvbmZpcm0oXCJBcmUgeW91IHN1cmU/XCIpXG4gICAgICAgIGlmIHJlc3VsdFxuICAgICAgICAgIHN0ciA9IFwiI3ttb21lbnQoJHNjb3BlLmZvcm1hdHRlZFN0YXJ0LCAnTS9EL1lZJykuZm9ybWF0KFwiTU1NTSBEbyBZWVlZXCIpfS0je21vbWVudCgkc2NvcGUuZm9ybWF0dGVkRW5kLCAnTS9EL1lZJykuZm9ybWF0KFwiTU1NTSBEbyBZWVlZXCIpfVwiXG4gICAgICAgICAgJHJvb3RTY29wZS5jdXJyZW50VXNlclJlZi5jaGlsZChcInRpbWVzaGVldHMvI3tzdHJ9L3N1Ym1pdHRlZFwiKS5zZXQgdHJ1ZVxuXG5cblxuXG5cblxuXG4gIERhc2hCb2FyZENvbnRyb2xsZXIuJGluamVjdCA9IFtcIiRzY29wZVwiLCBcIiRyb290U2NvcGVcIiwgXCIkc2NlXCIsIFwiRmlyZWJhc2VTZXJ2aWNlXCIsIFwiJHdpbmRvd1wiLCBcIiRmaXJlYmFzZU9iamVjdFwiLCBcIiRmaXJlYmFzZUFycmF5XCJdXG5cbiAgVGltZVNoZWV0QXBwLmNvbnRyb2xsZXIgJ0Rhc2hCb2FyZENvbnRyb2xsZXInLCBEYXNoQm9hcmRDb250cm9sbGVyXG5cbiAgRGFzaEJvYXJkQ29udHJvbGxlciJdfQ==
