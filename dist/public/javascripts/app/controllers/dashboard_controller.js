define(['app/base', 'angularjs', 'fbase'], function(TimeSheetApp) {
  var DashBoardController;
  DashBoardController = (function() {
    function DashBoardController($scope, $rootScope, $sce, FirebaseService, $window, $firebaseObject, $firebaseArray) {
      $scope.startDate = moment().date(5).startOf('day');
      $scope.endDate = moment().date(5).endOf('day').add(13, 'd');
      $scope.formattedStart = $scope.startDate.format('M/D/YY');
      $scope.formattedEnd = $scope.endDate.format('M/D/YY');
      $scope.lessonModel = {
        student: "",
        length: "",
        notes: ""
      };
      FirebaseService.rootRef.child('students').once("value", function(snap) {
        var k, students, v, _ref;
        students = [];
        _ref = snap.val();
        for (k in _ref) {
          v = _ref[k];
          students.push({
            id: k,
            name: v.firstName + " " + v.lastName
          });
        }
        return $scope.$apply(function() {
          return $scope.students = students;
        });
      });
      $rootScope.$watch('userBasic', function(newVal, oldVal) {
        if ($rootScope.userBasic) {
          if (!($rootScope.userBasic.manager || $rootScope.userBasic.mentor)) {
            return $rootScope.roleNotSet = true;
          } else {
            return $scope.loadDashboard();
          }
        }
      });
      $scope.loadDashboard = function() {
        var datepickerSelector, endM, maxDate, minDate, startM, str;
        if ($rootScope.userBasic.manager) {
          $scope.selectedTab = 'TIMESHEETS';
          $scope.currentDash = 'Manager';
          return $scope.mentors = $firebaseObject(FirebaseService.rootRef.child('users').startAt('manager').endAt('manager'));
        } else {
          $scope.currentDash = 'Mentor';
          startM = moment($scope.formattedStart, 'M/D/YY');
          endM = moment($scope.formattedEnd, 'M/D/YY');
          str = (moment($scope.formattedStart, 'M/D/YY').format("MMMM Do YYYY")) + "-" + (moment($scope.formattedEnd, 'M/D/YY').format("MMMM Do YYYY"));
          $scope.currentTimeSheet = $firebaseObject($rootScope.currentUserRef.child("timesheets/" + str + "/lessons"));
          $scope.currentTimeSheetSubmitted = $firebaseObject($rootScope.currentUserRef.child("timesheets/" + str + "/submitted"));
          minDate = startM.toDate();
          maxDate = endM.toDate();
          datepickerSelector = $('#datepicker-01');
          datepickerSelector.datepicker({
            showOtherMonths: true,
            selectOtherMonths: true,
            minDate: minDate,
            maxDate: maxDate,
            dateFormat: 'm/d/yy',
            yearRange: '-1:+1'
          }).prev('.input-group-btn').on('click', function(e) {
            e && e.preventDefault();
            datepickerSelector.focus();
          });
          $.extend($.datepicker, {
            _checkOffset: function(inst, offset, isFixed) {
              return offset;
            }
          });
          datepickerSelector.datepicker('widget').css({
            'margin-left': -datepickerSelector.prev('.input-group-btn').find('.btn').outerWidth() + 3
          });
          return $scope.reRenderDatePicker();
        }
      };
      $scope.reRenderDatePicker = function() {
        var endM, maxDate, minDate, startM;
        startM = moment($scope.formattedStart, 'M/D/YY');
        endM = moment($scope.formattedEnd, 'M/D/YY');
        minDate = startM.toDate();
        maxDate = endM.toDate();
        $('#datepicker-01').datepicker("option", "maxDate", maxDate);
        $('#datepicker-01').datepicker("option", "minDate", minDate);
      };
      $scope.openTimesheetsTab = function() {
        return $scope.selectedTab = 'TIMESHEETS';
      };
      $scope.formatLabel = function(item) {
        if (item) {
          return item.name;
        }
      };
      $scope.openInvoicesTab = function() {
        return $scope.selectedTab = 'INVOICES';
      };
      $scope.nextPeriod = function() {
        var oldEndDate, str;
        oldEndDate = $scope.endDate;
        $scope.startDate = oldEndDate;
        $scope.formattedStart = $scope.startDate.format('M/D/YY');
        $scope.endDate = $scope.startDate.add(13, 'd');
        $scope.formattedEnd = $scope.endDate.format('M/D/YY');
        $scope.reRenderDatePicker();
        if ($scope.currentDash === 'Mentor') {
          if ($scope.currentTimeSheet) {
            $scope.currentTimeSheet.$destroy();
          }
          str = (moment($scope.formattedStart, 'M/D/YY').format("MMMM Do YYYY")) + "-" + (moment($scope.formattedEnd, 'M/D/YY').format("MMMM Do YYYY"));
          $scope.currentTimeSheet = $firebaseObject($rootScope.currentUserRef.child("timesheets/" + str + "/lessons"));
          return $scope.currentTimeSheetSubmitted = $firebaseObject($rootScope.currentUserRef.child("timesheets/" + str + "/submitted"));
        }
      };
      $scope.prevPeriod = function() {
        var str;
        $scope.startDate = moment($scope.formattedStart, 'M/D/YY').subtract(13, 'd');
        $scope.formattedStart = $scope.startDate.format('M/D/YY');
        $scope.endDate = moment($scope.formattedEnd, 'M/D/YY').subtract(13, 'd');
        $scope.formattedEnd = $scope.endDate.format('M/D/YY');
        $scope.reRenderDatePicker();
        if ($scope.currentDash === 'Mentor') {
          if ($scope.currentTimeSheet) {
            $scope.currentTimeSheet.$destroy();
          }
          str = (moment($scope.formattedStart, 'M/D/YY').format("MMMM Do YYYY")) + "-" + (moment($scope.formattedEnd, 'M/D/YY').format("MMMM Do YYYY"));
          $scope.currentTimeSheet = $firebaseObject($rootScope.currentUserRef.child("timesheets/" + str + "/lessons"));
          return $scope.currentTimeSheetSubmitted = $firebaseObject($rootScope.currentUserRef.child("timesheets/" + str + "/submitted"));
        }
      };
      $scope.addLesson = function() {
        var currentTimeSheet;
        if ($scope.lessonModel.student.id && $scope.lessonModel.length.length > 0 && $('#datepicker-01').val().length > 0) {
          currentTimeSheet = (moment($scope.formattedStart, 'M/D/YY').format("MMMM Do YYYY")) + "-" + (moment($scope.formattedEnd, 'M/D/YY').format("MMMM Do YYYY"));
          $scope.lessonModel.date = moment($('#datepicker-01').val(), 'M/D/YYYY').format("MMMM Do YYYY");
          $rootScope.currentUserRef.child("timesheets/" + currentTimeSheet + "/lessons").push().set($scope.lessonModel);
          return $scope.lessonModel = {
            student: "",
            length: "",
            notes: ""
          };
        }
      };
      $scope.removeLesson = function(id) {
        var str;
        str = (moment($scope.formattedStart, 'M/D/YY').format("MMMM Do YYYY")) + "-" + (moment($scope.formattedEnd, 'M/D/YY').format("MMMM Do YYYY"));
        return $rootScope.currentUserRef.child("timesheets/" + str + "/lessons/" + id).set(null);
      };
      $scope.submitTimeSheet = function() {
        var result, str;
        result = confirm("Are you sure?");
        if (result) {
          str = (moment($scope.formattedStart, 'M/D/YY').format("MMMM Do YYYY")) + "-" + (moment($scope.formattedEnd, 'M/D/YY').format("MMMM Do YYYY"));
          return $rootScope.currentUserRef.child("timesheets/" + str + "/submitted").set(true);
        }
      };
    }

    return DashBoardController;

  })();
  DashBoardController.$inject = ["$scope", "$rootScope", "$sce", "FirebaseService", "$window", "$firebaseObject", "$firebaseArray"];
  TimeSheetApp.controller('DashBoardController', DashBoardController);
  return DashBoardController;
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2tyaXNobmFyb2toYWxlL2NvZGUvbGV2ZWwvbGV2ZWwvdGltZXNoZWV0YXBwL3B1YmxpYy9qYXZhc2NyaXB0cy9hcHAvY29udHJvbGxlcnMvZGFzaGJvYXJkX2NvbnRyb2xsZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMva3Jpc2huYXJva2hhbGUvY29kZS9sZXZlbC9sZXZlbC90aW1lc2hlZXRhcHAvYXNzZXRzL2phdmFzY3JpcHRzL2FwcC9jb250cm9sbGVycy9kYXNoYm9hcmRfY29udHJvbGxlci5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsTUFBQSxDQUFPLENBQUUsVUFBRixFQUFhLFdBQWIsRUFBMEIsT0FBMUIsQ0FBUCxFQUEwQyxTQUFDLFlBQUQsR0FBQTtBQUV4QyxNQUFBLG1CQUFBO0FBQUEsRUFBTTtBQUVTLElBQUEsNkJBQUMsTUFBRCxFQUFTLFVBQVQsRUFBcUIsSUFBckIsRUFBMkIsZUFBM0IsRUFBNEMsT0FBNUMsRUFBcUQsZUFBckQsRUFBc0UsY0FBdEUsR0FBQTtBQUVYLE1BQUEsTUFBTSxDQUFDLFNBQVAsR0FBbUIsTUFBQSxDQUFBLENBQVEsQ0FBQyxJQUFULENBQWMsQ0FBZCxDQUFnQixDQUFDLE9BQWpCLENBQTBCLEtBQTFCLENBQW5CLENBQUE7QUFBQSxNQUNBLE1BQU0sQ0FBQyxPQUFQLEdBQWlCLE1BQUEsQ0FBQSxDQUFRLENBQUMsSUFBVCxDQUFjLENBQWQsQ0FBZ0IsQ0FBQyxLQUFqQixDQUF3QixLQUF4QixDQUE2QixDQUFDLEdBQTlCLENBQWtDLEVBQWxDLEVBQXVDLEdBQXZDLENBRGpCLENBQUE7QUFBQSxNQUdBLE1BQU0sQ0FBQyxjQUFQLEdBQXdCLE1BQU0sQ0FBQyxTQUFTLENBQUMsTUFBakIsQ0FBeUIsUUFBekIsQ0FIeEIsQ0FBQTtBQUFBLE1BSUEsTUFBTSxDQUFDLFlBQVAsR0FBc0IsTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUFmLENBQXVCLFFBQXZCLENB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QUFxQyxDQUFDLE1BQXRDLENBQThDLGNBQTlDLENBQUQsQ0FBMUUsQ0FBQTtpQkFDQSxVQUFVLENBQUMsY0FBYyxDQUFDLEtBQTFCLENBQWlDLGFBQUEsR0FBYSxHQUFiLEdBQWlCLFlBQWxELENBQThELENBQUMsR0FBL0QsQ0FBbUUsSUFBbkUsRUFGRjtTQUZ1QjtNQUFBLENBbkl6QixDQUZXO0lBQUEsQ0FBYjs7K0JBQUE7O01BRkYsQ0FBQTtBQUFBLEVBbUpBLG1CQUFtQixDQUFDLE9BQXBCLEdBQThCLENBQUUsUUFBRixFQUFZLFlBQVosRUFBMEIsTUFBMUIsRUFBa0MsaUJBQWxDLEVBQXFELFNBQXJELEVBQWdFLGlCQUFoRSxFQUFtRixnQkFBbkYsQ0FuSjlCLENBQUE7QUFBQSxFQXFKQSxZQUFZLENBQUMsVUFBYixDQUF5QixxQkFBekIsRUFBK0MsbUJBQS9DLENBckpBLENBQUE7U0F1SkEsb0JBekp3QztBQUFBLENBQTFDLENBQUEsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImRlZmluZSBbJ2FwcC9iYXNlJywnYW5ndWxhcmpzJywgJ2ZiYXNlJ10sIChUaW1lU2hlZXRBcHApIC0+XG5cbiAgY2xhc3MgRGFzaEJvYXJkQ29udHJvbGxlclxuXG4gICAgY29uc3RydWN0b3I6ICgkc2NvcGUsICRyb290U2NvcGUsICRzY2UsIEZpcmViYXNlU2VydmljZSwgJHdpbmRvdywgJGZpcmViYXNlT2JqZWN0LCAkZmlyZWJhc2VBcnJheSkgLT5cblxuICAgICAgJHNjb3BlLnN0YXJ0RGF0ZSA9IG1vbWVudCgpLmRhdGUoNSkuc3RhcnRPZignZGF5JylcbiAgICAgICRzY29wZS5lbmREYXRlID0gbW9tZW50KCkuZGF0ZSg1KS5lbmRPZignZGF5JykuYWRkKDEzLCAnZCcpXG5cbiAgICAgICRzY29wZS5mb3JtYXR0ZWRTdGFydCA9ICRzY29wZS5zdGFydERhdGUuZm9ybWF0KCdNL0QvWVknKVxuICAgICAgJHNjb3BlLmZvcm1hdHRlZEVuZCA9ICRzY29wZS5lbmREYXRlLmZvcm1hdCgnTS9EL1lZJylcblxuXG4gICAgICAkc2NvcGUubGVzc29uTW9kZWwgPSB7c3R1ZGVudDogXCJcIiwgbGVuZ3RoOiBcIlwiLCBub3RlczogXCJcIn1cblxuICAgICAgRmlyZWJhc2VTZXJ2aWNlLnJvb3RSZWYuY2hpbGQoJ3N0dWRlbnRzJykub25jZSBcInZhbHVlXCIsIChzbmFwKSAtPlxuICAgICAgICBzdHVkZW50cyA9IFtdXG4gICAgICAgIGZvciBrLHYgb2Ygc25hcC52YWwoKVxuICAgICAgICAgIHN0dWRlbnRzLnB1c2gge2lkOiBrLCBuYW1lOiBcIiN7di5maXJzdE5hbWV9ICN7di5sYXN0TmFtZX1cIn1cblxuICAgICAgICAkc2NvcGUuJGFwcGx5IC0+XG4gICAgICAgICAgJHNjb3BlLnN0dWRlbnRzID0gc3R1ZGVudHNcblxuXG4gICAgICAkcm9vdFNjb3BlLiR3YXRjaCAndXNlckJhc2ljJywgKG5ld1ZhbCwgb2xkVmFsKSAtPlxuICAgICAgICBpZiAkcm9vdFNjb3BlLnVzZXJCYXNpY1xuICAgICAgICAgIHVubGVzcyAkcm9vdFNjb3BlLnVzZXJCYXNpYy5tYW5hZ2VyIHx8ICRyb290U2NvcGUudXNlckJhc2ljLm1lbnRvclxuICAgICAgICAgICAgJHJvb3RTY29wZS5yb2xlTm90U2V0ID0gdHJ1ZVxuICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICRzY29wZS5sb2FkRGFzaGJvYXJkKClcblxuXG5cblxuXG4gICAgICAkc2NvcGUubG9hZERhc2hib2FyZCA9ICgpIC0+XG4gICAgICAgIGlmICRyb290U2NvcGUudXNlckJhc2ljLm1hbmFnZXJcbiAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRUYWIgPSAnVElNRVNIRUVUUydcbiAgICAgICAgICAkc2NvcGUuY3VycmVudERhc2ggPSAnTWFuYWdlcidcbiAgICAgICAgICAkc2NvcGUubWVudG9ycyA9ICRmaXJlYmFzZU9iamVjdChGaXJlYmFzZVNlcnZpY2Uucm9vdFJlZi5jaGlsZCgndXNlcnMnKS5zdGFydEF0KCdtYW5hZ2VyJykuZW5kQXQoJ21hbmFnZXInKSlcbiAgICAgICAgZWxzZVxuICAgICAgICAgICRzY29wZS5jdXJyZW50RGFzaCA9ICdNZW50b3InXG5cbiAgICAgICAgICBzdGFydE0gPSBtb21lbnQoJHNjb3BlLmZvcm1hdHRlZFN0YXJ0LCAnTS9EL1lZJylcbiAgICAgICAgICBlbmRNID0gbW9tZW50KCRzY29wZS5mb3JtYXR0ZWRFbmQsICdNL0QvWVknKVxuXG4gICAgICAgICAgc3RyID0gXCIje21vbWVudCgkc2NvcGUuZm9ybWF0dGVkU3RhcnQsICdNL0QvWVknKS5mb3JtYXQoXCJNTU1NIERvIFlZWVlcIil9LSN7bW9tZW50KCRzY29wZS5mb3JtYXR0ZWRFbmQsICdNL0QvWVknKS5mb3JtYXQoXCJNTU1NIERvIFlZWVlcIil9XCJcbiAgICAgICAgICAkc2NvcGUuY3VycmVudFRpbWVTaGVldCA9ICRmaXJlYmFzZU9iamVjdCgkcm9vdFNjb3BlLmN1cnJlbnRVc2VyUmVmLmNoaWxkKFwidGltZXNoZWV0cy8je3N0cn0vbGVzc29uc1wiKSlcbiAgICAgICAgICAkc2NvcGUuY3VycmVudFRpbWVTaGVldFN1Ym1pdHRlZCA9ICRmaXJlYmFzZU9iamVjdCgkcm9vdFNjb3BlLmN1cnJlbnRVc2VyUmVmLmNoaWxkKFwidGltZXNoZWV0cy8je3N0cn0vc3VibWl0dGVkXCIpKVxuXG4gICAgICAgICAgbWluRGF0ZSA9IHN0YXJ0TS50b0RhdGUoKVxuICAgICAgICAgIG1heERhdGUgPSBlbmRNLnRvRGF0ZSgpXG5cbiAgICAgICAgICBkYXRlcGlja2VyU2VsZWN0b3IgPSAkKCcjZGF0ZXBpY2tlci0wMScpXG4gICAgICAgICAgZGF0ZXBpY2tlclNlbGVjdG9yLmRhdGVwaWNrZXIoXG4gICAgICAgICAgICBzaG93T3RoZXJNb250aHM6IHRydWVcbiAgICAgICAgICAgIHNlbGVjdE90aGVyTW9udGhzOiB0cnVlXG4gICAgICAgICAgICBtaW5EYXRlOiBtaW5EYXRlXG4gICAgICAgICAgICBtYXhEYXRlOiBtYXhEYXRlXG4gICAgICAgICAgICBkYXRlRm9ybWF0OiAnbS9kL3l5J1xuICAgICAgICAgICAgeWVhclJhbmdlOiAnLTE6KzEnKS5wcmV2KCcuaW5wdXQtZ3JvdXAtYnRuJykub24gJ2NsaWNrJywgKGUpIC0+XG4gICAgICAgICAgICAgIGUgYW5kIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgICBkYXRlcGlja2VyU2VsZWN0b3IuZm9jdXMoKVxuICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAkLmV4dGVuZCAkLmRhdGVwaWNrZXIsIF9jaGVja09mZnNldDogKGluc3QsIG9mZnNldCwgaXNGaXhlZCkgLT5cbiAgICAgICAgICAgIG9mZnNldFxuICAgICAgICAgIGRhdGVwaWNrZXJTZWxlY3Rvci5kYXRlcGlja2VyKCd3aWRnZXQnKS5jc3MgJ21hcmdpbi1sZWZ0JzogLWRhdGVwaWNrZXJTZWxlY3Rvci5wcmV2KCcuaW5wdXQtZ3JvdXAtYnRuJykuZmluZCgnLmJ0bicpLm91dGVyV2lkdGgoKSArIDNcblxuICAgICAgICAgICRzY29wZS5yZVJlbmRlckRhdGVQaWNrZXIoKVxuXG4gICAgICAkc2NvcGUucmVSZW5kZXJEYXRlUGlja2VyID0gKCkgLT5cbiAgICAgICAgc3RhcnRNID0gbW9tZW50KCRzY29wZS5mb3JtYXR0ZWRTdGFydCwgJ00vRC9ZWScpXG4gICAgICAgIGVuZE0gPSBtb21lbnQoJHNjb3BlLmZvcm1hdHRlZEVuZCwgJ00vRC9ZWScpXG5cbiAgICAgICAgbWluRGF0ZSA9IHN0YXJ0TS50b0RhdGUoKVxuICAgICAgICBtYXhEYXRlID0gZW5kTS50b0RhdGUoKVxuICAgICAgICAkKCcjZGF0ZXBpY2tlci0wMScpLmRhdGVwaWNrZXIoIFwib3B0aW9uXCIsIFwibWF4RGF0ZVwiLCBtYXhEYXRlIClcbiAgICAgICAgJCgnI2RhdGVwaWNrZXItMDEnKS5kYXRlcGlja2VyKCBcIm9wdGlvblwiLCBcIm1pbkRhdGVcIiwgbWluRGF0ZSApXG4gICAgICAgIHJldHVyblxuXG5cblxuICAgICAgJHNjb3BlLm9wZW5UaW1lc2hlZXRzVGFiID0gKCkgLT5cbiAgICAgICAgJHNjb3BlLnNlbGVjdGVkVGFiID0gJ1RJTUVTSEVFVFMnXG5cblxuICAgICAgJHNjb3BlLmZvcm1hdExhYmVsID0gKGl0ZW0pIC0+XG4gICAgICAgIGl0ZW0ubmFtZSBpZiBpdGVtXG5cblxuICAgICAgJHNjb3BlLm9wZW5JbnZvaWNlc1RhYiA9ICgpIC0+XG4gICAgICAgICRzY29wZS5zZWxlY3RlZFRhYiA9ICdJTlZPSUNFUydcblxuXG4gICAgICAkc2NvcGUubmV4dFBlcmlvZCA9ICgpIC0+XG4gICAgICAgIG9sZEVuZERhdGUgPSAkc2NvcGUuZW5kRGF0ZVxuICAgICAgICAkc2NvcGUuc3RhcnREYXRlID0gb2xkRW5kRGF0ZVxuICAgICAgICAkc2NvcGUuZm9ybWF0dGVkU3RhcnQgPSAkc2NvcGUuc3RhcnREYXRlLmZvcm1hdCgnTS9EL1lZJylcblxuICAgICAgICAkc2NvcGUuZW5kRGF0ZSA9ICRzY29wZS5zdGFydERhdGUuYWRkKDEzLCAnZCcpXG4gICAgICAgICRzY29wZS5mb3JtYXR0ZWRFbmQgPSAkc2NvcGUuZW5kRGF0ZS5mb3JtYXQoJ00vRC9ZWScpXG4gICAgICAgICRzY29wZS5yZVJlbmRlckRhdGVQaWNrZXIoKVxuXG4gICAgICAgIGlmICRzY29wZS5jdXJyZW50RGFzaCA9PSAnTWVudG9yJ1xuICAgICAgICAgICRzY29wZS5jdXJyZW50VGltZVNoZWV0LiRkZXN0cm95KCkgaWYgJHNjb3BlLmN1cnJlbnRUaW1lU2hlZXRcbiAgICAgICAgICBzdHIgPSBcIiN7bW9tZW50KCRzY29wZS5mb3JtYXR0ZWRTdGFydCwgJ00vRC9ZWScpLmZvcm1hdChcIk1NTU0gRG8gWVlZWVwiKX0tI3ttb21lbnQoJHNjb3BlLmZvcm1hdHRlZEVuZCwgJ00vRC9ZWScpLmZvcm1hdChcIk1NTU0gRG8gWVlZWVwiKX1cIlxuICAgICAgICAgICRzY29wZS5jdXJyZW50VGltZVNoZWV0ID0gJGZpcmViYXNlT2JqZWN0KCRyb290U2NvcGUuY3VycmVudFVzZXJSZWYuY2hpbGQoXCJ0aW1lc2hlZXRzLyN7c3RyfS9sZXNzb25zXCIpKVxuICAgICAgICAgICRzY29wZS5jdXJyZW50VGltZVNoZWV0U3VibWl0dGVkID0gJGZpcmViYXNlT2JqZWN0KCRyb290U2NvcGUuY3VycmVudFVzZXJSZWYuY2hpbGQoXCJ0aW1lc2hlZXRzLyN7c3RyfS9zdWJtaXR0ZWRcIikpXG5cblxuICAgICAgJHNjb3BlLnByZXZQZXJpb2QgPSAoKSAtPlxuICAgICAgICAkc2NvcGUuc3RhcnREYXRlID0gbW9tZW50KCRzY29wZS5mb3JtYXR0ZWRTdGFydCwgJ00vRC9ZWScpLnN1YnRyYWN0KDEzLCAnZCcpXG4gICAgICAgICRzY29wZS5mb3JtYXR0ZWRTdGFydCA9ICRzY29wZS5zdGFydERhdGUuZm9ybWF0KCdNL0QvWVknKVxuXG4gICAgICAgICRzY29wZS5lbmREYXRlID0gbW9tZW50KCRzY29wZS5mb3JtYXR0ZWRFbmQsICdNL0QvWVknKS5zdWJ0cmFjdCgxMywgJ2QnKVxuICAgICAgICAkc2NvcGUuZm9ybWF0dGVkRW5kID0gJHNjb3BlLmVuZERhdGUuZm9ybWF0KCdNL0QvWVknKVxuICAgICAgICAkc2NvcGUucmVSZW5kZXJEYXRlUGlja2VyKClcblxuICAgICAgICBpZiAkc2NvcGUuY3VycmVudERhc2ggPT0gJ01lbnRvcidcbiAgICAgICAgICAkc2NvcGUuY3VycmVudFRpbWVTaGVldC4kZGVzdHJveSgpIGlmICRzY29wZS5jdXJyZW50VGltZVNoZWV0XG4gICAgICAgICAgc3RyID0gXCIje21vbWVudCgkc2NvcGUuZm9ybWF0dGVkU3RhcnQsICdNL0QvWVknKS5mb3JtYXQoXCJNTU1NIERvIFlZWVlcIil9LSN7bW9tZW50KCRzY29wZS5mb3JtYXR0ZWRFbmQsICdNL0QvWVknKS5mb3JtYXQoXCJNTU1NIERvIFlZWVlcIil9XCJcbiAgICAgICAgICAkc2NvcGUuY3VycmVudFRpbWVTaGVldCA9ICRmaXJlYmFzZU9iamVjdCgkcm9vdFNjb3BlLmN1cnJlbnRVc2VyUmVmLmNoaWxkKFwidGltZXNoZWV0cy8je3N0cn0vbGVzc29uc1wiKSlcbiAgICAgICAgICAkc2NvcGUuY3VycmVudFRpbWVTaGVldFN1Ym1pdHRlZCA9ICRmaXJlYmFzZU9iamVjdCgkcm9vdFNjb3BlLmN1cnJlbnRVc2VyUmVmLmNoaWxkKFwidGltZXNoZWV0cy8je3N0cn0vc3VibWl0dGVkXCIpKVxuXG5cbiAgICAgICRzY29wZS5hZGRMZXNzb24gPSAoKSAtPlxuICAgICAgICBpZiAkc2NvcGUubGVzc29uTW9kZWwuc3R1ZGVudC5pZCBhbmQgJHNjb3BlLmxlc3Nvbk1vZGVsLmxlbmd0aC5sZW5ndGggPiAwIGFuZCAkKCcjZGF0ZXBpY2tlci0wMScpLnZhbCgpLmxlbmd0aCA+IDBcbiAgICAgICAgICBjdXJyZW50VGltZVNoZWV0ID0gXCIje21vbWVudCgkc2NvcGUuZm9ybWF0dGVkU3RhcnQsICdNL0QvWVknKS5mb3JtYXQoXCJNTU1NIERvIFlZWVlcIil9LSN7bW9tZW50KCRzY29wZS5mb3JtYXR0ZWRFbmQsICdNL0QvWVknKS5mb3JtYXQoXCJNTU1NIERvIFlZWVlcIil9XCJcbiAgICAgICAgICAkc2NvcGUubGVzc29uTW9kZWwuZGF0ZSA9IG1vbWVudCgkKCcjZGF0ZXBpY2tlci0wMScpLnZhbCgpLCAnTS9EL1lZWVknKS5mb3JtYXQoXCJNTU1NIERvIFlZWVlcIilcbiAgICAgICAgICAkcm9vdFNjb3BlLmN1cnJlbnRVc2VyUmVmLmNoaWxkKFwidGltZXNoZWV0cy8je2N1cnJlbnRUaW1lU2hlZXR9L2xlc3NvbnNcIikucHVzaCgpLnNldCAkc2NvcGUubGVzc29uTW9kZWxcbiAgICAgICAgICAkc2NvcGUubGVzc29uTW9kZWwgPSB7c3R1ZGVudDogXCJcIiwgbGVuZ3RoOiBcIlwiLCBub3RlczogXCJcIn1cblxuXG4gICAgICAkc2NvcGUucmVtb3ZlTGVzc29uID0gKGlkKSAtPlxuICAgICAgICBzdHIgPSBcIiN7bW9tZW50KCRzY29wZS5mb3JtYXR0ZWRTdGFydCwgJ00vRC9ZWScpLmZvcm1hdChcIk1NTU0gRG8gWVlZWVwiKX0tI3ttb21lbnQoJHNjb3BlLmZvcm1hdHRlZEVuZCwgJ00vRC9ZWScpLmZvcm1hdChcIk1NTU0gRG8gWVlZWVwiKX1cIlxuICAgICAgICAkcm9vdFNjb3BlLmN1cnJlbnRVc2VyUmVmLmNoaWxkKFwidGltZXNoZWV0cy8je3N0cn0vbGVzc29ucy8je2lkfVwiKS5zZXQgbnVsbFxuXG4gICAgICAkc2NvcGUuc3VibWl0VGltZVNoZWV0ID0gKCkgLT5cbiAgICAgICAgcmVzdWx0ID0gY29uZmlybShcIkFyZSB5b3Ugc3VyZT9cIilcbiAgICAgICAgaWYgcmVzdWx0XG4gICAgICAgICAgc3RyID0gXCIje21vbWVudCgkc2NvcGUuZm9ybWF0dGVkU3RhcnQsICdNL0QvWVknKS5mb3JtYXQoXCJNTU1NIERvIFlZWVlcIil9LSN7bW9tZW50KCRzY29wZS5mb3JtYXR0ZWRFbmQsICdNL0QvWVknKS5mb3JtYXQoXCJNTU1NIERvIFlZWVlcIil9XCJcbiAgICAgICAgICAkcm9vdFNjb3BlLmN1cnJlbnRVc2VyUmVmLmNoaWxkKFwidGltZXNoZWV0cy8je3N0cn0vc3VibWl0dGVkXCIpLnNldCB0cnVlXG5cblxuXG5cblxuXG5cbiAgRGFzaEJvYXJkQ29udHJvbGxlci4kaW5qZWN0ID0gW1wiJHNjb3BlXCIsIFwiJHJvb3RTY29wZVwiLCBcIiRzY2VcIiwgXCJGaXJlYmFzZVNlcnZpY2VcIiwgXCIkd2luZG93XCIsIFwiJGZpcmViYXNlT2JqZWN0XCIsIFwiJGZpcmViYXNlQXJyYXlcIl1cblxuICBUaW1lU2hlZXRBcHAuY29udHJvbGxlciAnRGFzaEJvYXJkQ29udHJvbGxlcicsIERhc2hCb2FyZENvbnRyb2xsZXJcblxuICBEYXNoQm9hcmRDb250cm9sbGVyIl19
