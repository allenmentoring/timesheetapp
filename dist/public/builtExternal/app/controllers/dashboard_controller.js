define(['app/base', 'angularjs', 'fbase'], function(TimeSheetApp) {
  var DashBoardController;
  DashBoardController = (function() {
    function DashBoardController($scope, $rootScope, $sce, FirebaseService, $window, $firebaseObject, $firebaseArray) {
      $scope.moment = moment;
      $scope.startDate = moment({
        year: 2015,
        month: 6,
        day: 2
      }).add(Math.floor((moment().diff(moment({
        year: 2015,
        month: 6,
        day: 2
      }), 'days')) / 14) * 13, 'd');
      $scope.endDate = moment({
        year: 2015,
        month: 6,
        day: 2
      }).add(Math.ceil((moment().diff(moment({
        year: 2015,
        month: 6,
        day: 2
      }), 'days')) / 14) * 13, 'd');
      $scope.formattedStart = $scope.startDate.format('M/D/YY');
      $scope.formattedEnd = $scope.endDate.format('M/D/YY');
      $scope.currentTimeSheetKey = (moment($scope.formattedStart, 'M/D/YY').format("MMMM Do YYYY")) + "-" + (moment($scope.formattedEnd, 'M/D/YY').format("MMMM Do YYYY"));
      $scope.currentPayPeriod = (moment($scope.formattedStart, 'M/D/YY').format("MMMM Do YYYY")) + "-" + (moment($scope.formattedEnd, 'M/D/YY').format("MMMM Do YYYY"));
      $scope.lessonModel = {
        student: "",
        length: "",
        notes: ""
      };
      FirebaseService.rootRef.child('students').once("value", function(snap) {
        var k, students, v, _ref;
        students = [];
        _ref = snap.val();
        for (k in _ref) {
          v = _ref[k];
          students.push({
            id: k,
            name: v.firstName + " " + v.lastName,
            parent: v.parent
          });
        }
        return $scope.$apply(function() {
          return $scope.students = students;
        });
      });
      $rootScope.$watch('userBasic', function(newVal, oldVal) {
        if ($rootScope.userBasic) {
          if (!($rootScope.userBasic.manager || $rootScope.userBasic.mentor)) {
            return $rootScope.roleNotSet = true;
          } else {
            return $scope.loadDashboard();
          }
        }
      });
      $scope.nextPeriod = function() {
        var oldEndDate;
        oldEndDate = $scope.endDate;
        $scope.startDate = oldEndDate;
        $scope.formattedStart = $scope.startDate.format('M/D/YY');
        $scope.endDate = $scope.startDate.add(13, 'd');
        $scope.formattedEnd = $scope.endDate.format('M/D/YY');
        $scope.currentTimeSheetKey = (moment($scope.formattedStart, 'M/D/YY').format("MMMM Do YYYY")) + "-" + (moment($scope.formattedEnd, 'M/D/YY').format("MMMM Do YYYY"));
        $scope.reRenderDatePicker();
        if ($scope.currentDash === 'Mentor') {
          if ($scope.currentTimeSheet) {
            $scope.currentTimeSheet.$destroy();
          }
          $scope.currentTimeSheet = $firebaseObject($rootScope.currentUserRef.child("timesheets/" + $scope.currentTimeSheetKey + "/lessons"));
          return $scope.currentTimeSheetSubmitted = $firebaseObject($rootScope.currentUserRef.child("timesheets/" + $scope.currentTimeSheetKey + "/submitted"));
        }
      };
      $scope.prevPeriod = function() {
        $scope.startDate = moment($scope.formattedStart, 'M/D/YY').subtract(13, 'd');
        $scope.formattedStart = $scope.startDate.format('M/D/YY');
        $scope.endDate = moment($scope.formattedEnd, 'M/D/YY').subtract(13, 'd');
        $scope.formattedEnd = $scope.endDate.format('M/D/YY');
        $scope.currentTimeSheetKey = (moment($scope.formattedStart, 'M/D/YY').format("MMMM Do YYYY")) + "-" + (moment($scope.formattedEnd, 'M/D/YY').format("MMMM Do YYYY"));
        $scope.reRenderDatePicker();
        if ($scope.currentDash === 'Mentor') {
          if ($scope.currentTimeSheet) {
            $scope.currentTimeSheet.$destroy();
          }
          $scope.currentTimeSheet = $firebaseObject($rootScope.currentUserRef.child("timesheets/" + $scope.currentTimeSheetKey + "/lessons"));
          return $scope.currentTimeSheetSubmitted = $firebaseObject($rootScope.currentUserRef.child("timesheets/" + $scope.currentTimeSheetKey + "/submitted"));
        }
      };
      $scope.reRenderDatePicker = function() {
        var maxDate, minDate;
        minDate = $scope.startDate.toDate();
        maxDate = $scope.endDate.toDate();
        $('#datepicker-01').datepicker("option", "maxDate", maxDate);
        $('#datepicker-01').datepicker("option", "minDate", minDate);
      };
      $scope.loadDashboard = function() {
        var datepickerSelector, maxDate, minDate;
        if ($rootScope.userBasic.manager) {
          $scope.selectedTab = 'TIMESHEETS';
          $scope.currentDash = 'Manager';
          return $scope.mentors = $firebaseObject(FirebaseService.rootRef.child('users').startAt('mentor').endAt('mentor'));
        } else {
          $scope.currentDash = 'Mentor';
          $scope.currentTimeSheet = $firebaseObject($rootScope.currentUserRef.child("timesheets/" + $scope.currentTimeSheetKey + "/lessons"));
          $scope.currentTimeSheetSubmitted = $firebaseObject($rootScope.currentUserRef.child("timesheets/" + $scope.currentTimeSheetKey + "/submitted"));
          minDate = $scope.startDate.toDate();
          maxDate = $scope.endDate.toDate();
          datepickerSelector = $('#datepicker-01');
          datepickerSelector.datepicker({
            showOtherMonths: true,
            selectOtherMonths: true,
            minDate: minDate,
            maxDate: maxDate,
            dateFormat: 'm/d/yy',
            yearRange: '-1:+1'
          }).prev('.input-group-btn').on('click', function(e) {
            e && e.preventDefault();
            datepickerSelector.focus();
          });
          $.extend($.datepicker, {
            _checkOffset: function(inst, offset, isFixed) {
              return offset;
            }
          });
          datepickerSelector.datepicker('widget').css({
            'margin-left': -datepickerSelector.prev('.input-group-btn').find('.btn').outerWidth() + 3
          });
          return $scope.reRenderDatePicker();
        }
      };
      $scope.openTimesheetsTab = function() {
        return $scope.selectedTab = 'TIMESHEETS';
      };
      $scope.formatLabel = function(item) {
        if (item) {
          return item.name;
        }
      };
      $scope.openInvoicesTab = function() {
        $scope.selectedTab = 'INVOICES';
        return $scope.parents = $firebaseObject($rootScope.rootRef.child("parents"));
      };
      $scope.addLesson = function() {
        if (!$scope.lessonModel.student.id) {
          alert('Please select a student from the drop down menu.');
        }
        if ($scope.lessonModel.student.id && $scope.lessonModel.length.length > 0 && $('#datepicker-01').val().length > 0) {
          $scope.lessonModel.date = moment($('#datepicker-01').val(), 'M/D/YYYY').format("MMMM Do YYYY");
          $rootScope.currentUserRef.child("timesheets/" + $scope.currentTimeSheetKey + "/lessons").push().set($scope.lessonModel);
          return $scope.lessonModel = {
            student: "",
            length: "",
            notes: ""
          };
        }
      };
      $scope.removeLesson = function(id) {
        return $rootScope.currentUserRef.child("timesheets/" + $scope.currentTimeSheetKey + "/lessons/" + id).set(null);
      };
      $scope.submitTimeSheet = function() {
        var result, totalTime;
        result = confirm("Are you sure? You are finalizing your timesheet for this pay period. This action cannot be undone.");
        if (result) {
          $rootScope.currentUserRef.child("timesheets/" + $scope.currentTimeSheetKey + "/submitted").set(true);
          totalTime = 0.00;
          angular.forEach($scope.currentTimeSheet, function(value, key) {
            totalTime = totalTime + parseFloat(value.length);
            return $rootScope.rootRef.child("parents/" + value.student.parent.parentId + "/invoices/" + $scope.currentTimeSheetKey).push().set({
              date: value.date,
              studentName: value.student.name,
              length: value.length,
              notes: value.notes,
              mentorId: $rootScope.currentUid,
              mentorName: $rootScope.userBasic.firstName + " " + $rootScope.userBasic.lastName
            });
          });
          $rootScope.currentUserRef.child("timesheets/" + $scope.currentTimeSheetKey + "/totalTime").set(totalTime);
          return $rootScope.currentUserRef.child("timesheets/" + $scope.currentTimeSheetKey).setPriority('submitted');
        }
      };
      $scope.manageMentor = function(userid, mentor) {
        $scope.showManageMentor = true;
        return $scope.showManageMentorObj = mentor;
      };
      $scope.calculateTotalHoursForAParent = function(lessons) {
        var k, totalHours, v;
        totalHours = 0;
        for (k in lessons) {
          v = lessons[k];
          totalHours = parseFloat(v.length) + totalHours;
        }
        return totalHours;
      };
      $scope.manageParent = function(userid, parent) {
        $scope.showManageParent = true;
        return $scope.showManageParentObj = parent;
      };
      $scope.checkCurrentPayPeriod = function() {
        return moment().isBetween($scope.startDate, $scope.endDate);
      };
    }

    return DashBoardController;

  })();
  DashBoardController.$inject = ["$scope", "$rootScope", "$sce", "FirebaseService", "$window", "$firebaseObject", "$firebaseArray"];
  TimeSheetApp.controller('DashBoardController', DashBoardController);
  return DashBoardController;
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2tyaXNobmFyb2toYWxlL2NvZGUvbGV2ZWwvbGV2ZWwvdGltZXNoZWV0YXBwL3B1YmxpYy9qYXZhc2NyaXB0cy9hcHAvY29udHJvbGxlcnMvZGFzaGJvYXJkX2NvbnRyb2xsZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMva3Jpc2huYXJva2hhbGUvY29kZS9sZXZlbC9sZXZlbC90aW1lc2hlZXRhcHAvYXNzZXRzL2phdmFzY3JpcHRzL2FwcC9jb250cm9sbGVycy9kYXNoYm9hcmRfY29udHJvbGxlci5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsTUFBQSxDQUFPLENBQUUsVUFBRixFQUFhLFdBQWIsRUFBMEIsT0FBMUIsQ0FBUCxFQUEwQyxTQUFDLFlBQUQsR0FBQTtBQUV4QyxNQUFBLG1CQUFBO0FBQUEsRUFBTTtBQUVTLElBQUEsNkJBQUMsTUFBRCxFQUFTLFVBQVQsRUFBcUIsSUFBckIsRUFBMkIsZUFBM0IsRUFBNEMsT0FBNUMsRUFBcUQsZUFBckQsRUFBc0UsY0FBdEUsR0FBQTtBQUVYLE1BQUEsTUFBTSxDQUFDLE1BQVAsR0FBZ0IsTUFBaEIsQ0FBQTtBQUFBLE1BQ0EsTUFBTSxDQUFDLFNBQVAsR0FBbUIsTUFBQSxDQUFPO0FBQUEsUUFBRSxJQUFBLEVBQU0sSUFBUjtBQUFBLFFBQWMsS0FBQSxFQUFPLENBQXJCO0FBQUEsUUFBd0IsR0FBQSxFQUFLLENBQTdCO09BQVAsQ0FBdUMsQ0FBQyxHQUF4QyxDQUE0QyxJQUFJLENBQUMsS0FBTCxDQUFXLENBQUMsTUFBQSxDQUFBLENBQVEsQ0FBQyxJQUFULENBQWMsTUFBQSxDQUFPO0FBQUEsUUFBRSxJQUFBLEVBQU0sSUFBUjtBQUFBLFFBQWMsS0FBQSxFQUFPLENBQXJCO0FBQUEsUUFBd0IsR0FBQSxFQUFLLENBQTdCO09BQVAsQ0FBZCxFQUF3RCxNQUF4RCxDQUFELENBQUEsR0FBaUUsRUFBNUUsQ0FBQSxHQUFnRixFQUE1SCxFQUFpSSxHQUFq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Q0E3SnRCLENBQUE7QUFBQSxNQWtLQSxNQUFNLENBQUMscUJBQVAsR0FBK0IsU0FBQSxHQUFBO2VBQzdCLE1BQUEsQ0FBQSxDQUFRLENBQUMsU0FBVCxDQUFtQixNQUFNLENBQUMsU0FBMUIsRUFBcUMsTUFBTSxDQUFDLE9BQTVDLEVBRDZCO01BQUEsQ0FsSy9CLENBRlc7SUFBQSxDQUFiOzsrQkFBQTs7TUFGRixDQUFBO0FBQUEsRUE0S0EsbUJBQW1CLENBQUMsT0FBcEIsR0FBOEIsQ0FBRSxRQUFGLEVBQVksWUFBWixFQUEwQixNQUExQixFQUFrQyxpQkFBbEMsRUFBcUQsU0FBckQsRUFBZ0UsaUJBQWhFLEVBQW1GLGdCQUFuRixDQTVLOUIsQ0FBQTtBQUFBLEVBOEtBLFlBQVksQ0FBQyxVQUFiLENBQXlCLHFCQUF6QixFQUErQyxtQkFBL0MsQ0E5S0EsQ0FBQTtTQWdMQSxvQkFsTHdDO0FBQUEsQ0FBMUMsQ0FBQSxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiZGVmaW5lIFsnYXBwL2Jhc2UnLCdhbmd1bGFyanMnLCAnZmJhc2UnXSwgKFRpbWVTaGVldEFwcCkgLT5cblxuICBjbGFzcyBEYXNoQm9hcmRDb250cm9sbGVyXG5cbiAgICBjb25zdHJ1Y3RvcjogKCRzY29wZSwgJHJvb3RTY29wZSwgJHNjZSwgRmlyZWJhc2VTZXJ2aWNlLCAkd2luZG93LCAkZmlyZWJhc2VPYmplY3QsICRmaXJlYmFzZUFycmF5KSAtPlxuXG4gICAgICAkc2NvcGUubW9tZW50ID0gbW9tZW50XG4gICAgICAkc2NvcGUuc3RhcnREYXRlID0gbW9tZW50KHsgeWVhciA6MjAxNSwgbW9udGggOjYsIGRheSA6Mn0pLmFkZChNYXRoLmZsb29yKChtb21lbnQoKS5kaWZmKG1vbWVudCh7IHllYXIgOjIwMTUsIG1vbnRoIDo2LCBkYXkgOjJ9KSwgJ2RheXMnKSkvMTQpKjEzLCAnZCcpXG4gICAgICAkc2NvcGUuZW5kRGF0ZSA9IG1vbWVudCh7IHllYXIgOjIwMTUsIG1vbnRoIDo2LCBkYXkgOjJ9KS5hZGQoTWF0aC5jZWlsKChtb21lbnQoKS5kaWZmKG1vbWVudCh7IHllYXIgOjIwMTUsIG1vbnRoIDo2LCBkYXkgOjJ9KSwgJ2RheXMnKSkvMTQpKjEzLCAnZCcpXG5cblxuICAgICAgJHNjb3BlLmZvcm1hdHRlZFN0YXJ0ID0gJHNjb3BlLnN0YXJ0RGF0ZS5mb3JtYXQoJ00vRC9ZWScpXG4gICAgICAkc2NvcGUuZm9ybWF0dGVkRW5kID0gJHNjb3BlLmVuZERhdGUuZm9ybWF0KCdNL0QvWVknKVxuXG4gICAgICAkc2NvcGUuY3VycmVudFRpbWVTaGVldEtleSA9IFwiI3ttb21lbnQoJHNjb3BlLmZvcm1hdHRlZFN0YXJ0LCAnTS9EL1lZJykuZm9ybWF0KFwiTU1NTSBEbyBZWVlZXCIpfS0je21vbWVudCgkc2NvcGUuZm9ybWF0dGVkRW5kLCAnTS9EL1lZJykuZm9ybWF0KFwiTU1NTSBEbyBZWVlZXCIpfVwiXG4gICAgICAkc2NvcGUuY3VycmVudFBheVBlcmlvZCA9IFwiI3ttb21lbnQoJHNjb3BlLmZvcm1hdHRlZFN0YXJ0LCAnTS9EL1lZJykuZm9ybWF0KFwiTU1NTSBEbyBZWVlZXCIpfS0je21vbWVudCgkc2NvcGUuZm9ybWF0dGVkRW5kLCAnTS9EL1lZJykuZm9ybWF0KFwiTU1NTSBEbyBZWVlZXCIpfVwiXG5cblxuICAgICAgJHNjb3BlLmxlc3Nvbk1vZGVsID0ge3N0dWRlbnQ6IFwiXCIsIGxlbmd0aDogXCJcIiwgbm90ZXM6IFwiXCJ9XG5cbiAgICAgIEZpcmViYXNlU2VydmljZS5yb290UmVmLmNoaWxkKCdzdHVkZW50cycpLm9uY2UgXCJ2YWx1ZVwiLCAoc25hcCkgLT5cbiAgICAgICAgc3R1ZGVudHMgPSBbXVxuICAgICAgICBmb3Igayx2IG9mIHNuYXAudmFsKClcbiAgICAgICAgICBzdHVkZW50cy5wdXNoIHtpZDogaywgbmFtZTogXCIje3YuZmlyc3ROYW1lfSAje3YubGFzdE5hbWV9XCIsIHBhcmVudDogdi5wYXJlbnR9XG5cbiAgICAgICAgJHNjb3BlLiRhcHBseSAtPlxuICAgICAgICAgICRzY29wZS5zdHVkZW50cyA9IHN0dWRlbnRzXG5cblxuICAgICAgJHJvb3RTY29wZS4kd2F0Y2ggJ3VzZXJCYXNpYycsIChuZXdWYWwsIG9sZFZhbCkgLT5cbiAgICAgICAgaWYgJHJvb3RTY29wZS51c2VyQmFzaWNcbiAgICAgICAgICB1bmxlc3MgJHJvb3RTY29wZS51c2VyQmFzaWMubWFuYWdlciB8fCAkcm9vdFNjb3BlLnVzZXJCYXNpYy5tZW50b3JcbiAgICAgICAgICAgICRyb290U2NvcGUucm9sZU5vdFNldCA9IHRydWVcbiAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAkc2NvcGUubG9hZERhc2hib2FyZCgpXG5cblxuXG4gICAgICAkc2NvcGUubmV4dFBlcmlvZCA9ICgpIC0+XG4gICAgICAgIG9sZEVuZERhdGUgPSAkc2NvcGUuZW5kRGF0ZVxuICAgICAgICAkc2NvcGUuc3RhcnREYXRlID0gb2xkRW5kRGF0ZVxuICAgICAgICAkc2NvcGUuZm9ybWF0dGVkU3RhcnQgPSAkc2NvcGUuc3RhcnREYXRlLmZvcm1hdCgnTS9EL1lZJylcblxuICAgICAgICAkc2NvcGUuZW5kRGF0ZSA9ICRzY29wZS5zdGFydERhdGUuYWRkKDEzLCAnZCcpXG4gICAgICAgICRzY29wZS5mb3JtYXR0ZWRFbmQgPSAkc2NvcGUuZW5kRGF0ZS5mb3JtYXQoJ00vRC9ZWScpXG5cbiAgICAgICAgJHNjb3BlLmN1cnJlbnRUaW1lU2hlZXRLZXkgPSBcIiN7bW9tZW50KCRzY29wZS5mb3JtYXR0ZWRTdGFydCwgJ00vRC9ZWScpLmZvcm1hdChcIk1NTU0gRG8gWVlZWVwiKX0tI3ttb21lbnQoJHNjb3BlLmZvcm1hdHRlZEVuZCwgJ00vRC9ZWScpLmZvcm1hdChcIk1NTU0gRG8gWVlZWVwiKX1cIlxuXG4gICAgICAgICRzY29wZS5yZVJlbmRlckRhdGVQaWNrZXIoKVxuXG4gICAgICAgIGlmICRzY29wZS5jdXJyZW50RGFzaCA9PSAnTWVudG9yJ1xuICAgICAgICAgICRzY29wZS5jdXJyZW50VGltZVNoZWV0LiRkZXN0cm95KCkgaWYgJHNjb3BlLmN1cnJlbnRUaW1lU2hlZXRcbiAgICAgICAgICAkc2NvcGUuY3VycmVudFRpbWVTaGVldCA9ICRmaXJlYmFzZU9iamVjdCgkcm9vdFNjb3BlLmN1cnJlbnRVc2VyUmVmLmNoaWxkKFwidGltZXNoZWV0cy8jeyRzY29wZS5jdXJyZW50VGltZVNoZWV0S2V5fS9sZXNzb25zXCIpKVxuICAgICAgICAgICRzY29wZS5jdXJyZW50VGltZVNoZWV0U3VibWl0dGVkID0gJGZpcmViYXNlT2JqZWN0KCRyb290U2NvcGUuY3VycmVudFVzZXJSZWYuY2hpbGQoXCJ0aW1lc2hlZXRzLyN7JHNjb3BlLmN1cnJlbnRUaW1lU2hlZXRLZXl9L3N1Ym1pdHRlZFwiKSlcblxuXG4gICAgICAkc2NvcGUucHJldlBlcmlvZCA9ICgpIC0+XG4gICAgICAgICRzY29wZS5zdGFydERhdGUgPSBtb21lbnQoJHNjb3BlLmZvcm1hdHRlZFN0YXJ0LCAnTS9EL1lZJykuc3VidHJhY3QoMTMsICdkJylcbiAgICAgICAgJHNjb3BlLmZvcm1hdHRlZFN0YXJ0ID0gJHNjb3BlLnN0YXJ0RGF0ZS5mb3JtYXQoJ00vRC9ZWScpXG5cbiAgICAgICAgJHNjb3BlLmVuZERhdGUgPSBtb21lbnQoJHNjb3BlLmZvcm1hdHRlZEVuZCwgJ00vRC9ZWScpLnN1YnRyYWN0KDEzLCAnZCcpXG4gICAgICAgICRzY29wZS5mb3JtYXR0ZWRFbmQgPSAkc2NvcGUuZW5kRGF0ZS5mb3JtYXQoJ00vRC9ZWScpXG5cbiAgICAgICAgJHNjb3BlLmN1cnJlbnRUaW1lU2hlZXRLZXkgPSBcIiN7bW9tZW50KCRzY29wZS5mb3JtYXR0ZWRTdGFydCwgJ00vRC9ZWScpLmZvcm1hdChcIk1NTU0gRG8gWVlZWVwiKX0tI3ttb21lbnQoJHNjb3BlLmZvcm1hdHRlZEVuZCwgJ00vRC9ZWScpLmZvcm1hdChcIk1NTU0gRG8gWVlZWVwiKX1cIlxuXG4gICAgICAgICRzY29wZS5yZVJlbmRlckRhdGVQaWNrZXIoKVxuXG4gICAgICAgIGlmICRzY29wZS5jdXJyZW50RGFzaCA9PSAnTWVudG9yJ1xuICAgICAgICAgICRzY29wZS5jdXJyZW50VGltZVNoZWV0LiRkZXN0cm95KCkgaWYgJHNjb3BlLmN1cnJlbnRUaW1lU2hlZXRcbiAgICAgICAgICAkc2NvcGUuY3VycmVudFRpbWVTaGVldCA9ICRmaXJlYmFzZU9iamVjdCgkcm9vdFNjb3BlLmN1cnJlbnRVc2VyUmVmLmNoaWxkKFwidGltZXNoZWV0cy8jeyRzY29wZS5jdXJyZW50VGltZVNoZWV0S2V5fS9sZXNzb25zXCIpKVxuICAgICAgICAgICRzY29wZS5jdXJyZW50VGltZVNoZWV0U3VibWl0dGVkID0gJGZpcmViYXNlT2JqZWN0KCRyb290U2NvcGUuY3VycmVudFVzZXJSZWYuY2hpbGQoXCJ0aW1lc2hlZXRzLyN7JHNjb3BlLmN1cnJlbnRUaW1lU2hlZXRLZXl9L3N1Ym1pdHRlZFwiKSlcblxuXG4gICAgICAkc2NvcGUucmVSZW5kZXJEYXRlUGlja2VyID0gKCkgLT5cbiAgICAgICAgbWluRGF0ZSA9ICRzY29wZS5zdGFydERhdGUudG9EYXRlKClcbiAgICAgICAgbWF4RGF0ZSA9ICRzY29wZS5lbmREYXRlLnRvRGF0ZSgpXG4gICAgICAgICQoJyNkYXRlcGlja2VyLTAxJykuZGF0ZXBpY2tlciggXCJvcHRpb25cIiwgXCJtYXhEYXRlXCIsIG1heERhdGUgKVxuICAgICAgICAkKCcjZGF0ZXBpY2tlci0wMScpLmRhdGVwaWNrZXIoIFwib3B0aW9uXCIsIFwibWluRGF0ZVwiLCBtaW5EYXRlIClcbiAgICAgICAgcmV0dXJuXG5cblxuICAgICAgJHNjb3BlLmxvYWREYXNoYm9hcmQgPSAoKSAtPlxuICAgICAgICBpZiAkcm9vdFNjb3BlLnVzZXJCYXNpYy5tYW5hZ2VyXG4gICAgICAgICAgJHNjb3BlLnNlbGVjdGVkVGFiID0gJ1RJTUVTSEVFVFMnXG4gICAgICAgICAgJHNjb3BlLmN1cnJlbnREYXNoID0gJ01hbmFnZXInXG4gICAgICAgICAgJHNjb3BlLm1lbnRvcnMgPSAkZmlyZWJhc2VPYmplY3QoRmlyZWJhc2VTZXJ2aWNlLnJvb3RSZWYuY2hpbGQoJ3VzZXJzJykuc3RhcnRBdCgnbWVudG9yJykuZW5kQXQoJ21lbnRvcicpKVxuXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAkc2NvcGUuY3VycmVudERhc2ggPSAnTWVudG9yJ1xuXG4gICAgICAgICAgJHNjb3BlLmN1cnJlbnRUaW1lU2hlZXQgPSAkZmlyZWJhc2VPYmplY3QoJHJvb3RTY29wZS5jdXJyZW50VXNlclJlZi5jaGlsZChcInRpbWVzaGVldHMvI3skc2NvcGUuY3VycmVudFRpbWVTaGVldEtleX0vbGVzc29uc1wiKSlcbiAgICAgICAgICAkc2NvcGUuY3VycmVudFRpbWVTaGVldFN1Ym1pdHRlZCA9ICRmaXJlYmFzZU9iamVjdCgkcm9vdFNjb3BlLmN1cnJlbnRVc2VyUmVmLmNoaWxkKFwidGltZXNoZWV0cy8jeyRzY29wZS5jdXJyZW50VGltZVNoZWV0S2V5fS9zdWJtaXR0ZWRcIikpXG5cbiAgICAgICAgICBtaW5EYXRlID0gJHNjb3BlLnN0YXJ0RGF0ZS50b0RhdGUoKVxuICAgICAgICAgIG1heERhdGUgPSAkc2NvcGUuZW5kRGF0ZS50b0RhdGUoKVxuXG4gICAgICAgICAgZGF0ZXBpY2tlclNlbGVjdG9yID0gJCgnI2RhdGVwaWNrZXItMDEnKVxuICAgICAgICAgIGRhdGVwaWNrZXJTZWxlY3Rvci5kYXRlcGlja2VyKFxuICAgICAgICAgICAgc2hvd090aGVyTW9udGhzOiB0cnVlXG4gICAgICAgICAgICBzZWxlY3RPdGhlck1vbnRoczogdHJ1ZVxuICAgICAgICAgICAgbWluRGF0ZTogbWluRGF0ZVxuICAgICAgICAgICAgbWF4RGF0ZTogbWF4RGF0ZVxuICAgICAgICAgICAgZGF0ZUZvcm1hdDogJ20vZC95eSdcbiAgICAgICAgICAgIHllYXJSYW5nZTogJy0xOisxJykucHJldignLmlucHV0LWdyb3VwLWJ0bicpLm9uICdjbGljaycsIChlKSAtPlxuICAgICAgICAgICAgICBlIGFuZCBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICAgICAgZGF0ZXBpY2tlclNlbGVjdG9yLmZvY3VzKClcbiAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgJC5leHRlbmQgJC5kYXRlcGlja2VyLCBfY2hlY2tPZmZzZXQ6IChpbnN0LCBvZmZzZXQsIGlzRml4ZWQpIC0+XG4gICAgICAgICAgICBvZmZzZXRcbiAgICAgICAgICBkYXRlcGlja2VyU2VsZWN0b3IuZGF0ZXBpY2tlcignd2lkZ2V0JykuY3NzICdtYXJnaW4tbGVmdCc6IC1kYXRlcGlja2VyU2VsZWN0b3IucHJldignLmlucHV0LWdyb3VwLWJ0bicpLmZpbmQoJy5idG4nKS5vdXRlcldpZHRoKCkgKyAzXG5cbiAgICAgICAgICAkc2NvcGUucmVSZW5kZXJEYXRlUGlja2VyKClcblxuICAgICAgJHNjb3BlLm9wZW5UaW1lc2hlZXRzVGFiID0gKCkgLT5cbiAgICAgICAgJHNjb3BlLnNlbGVjdGVkVGFiID0gJ1RJTUVTSEVFVFMnXG5cblxuICAgICAgJHNjb3BlLmZvcm1hdExhYmVsID0gKGl0ZW0pIC0+XG4gICAgICAgIGl0ZW0ubmFtZSBpZiBpdGVtXG5cblxuICAgICAgJHNjb3BlLm9wZW5JbnZvaWNlc1RhYiA9ICgpIC0+XG4gICAgICAgICRzY29wZS5zZWxlY3RlZFRhYiA9ICdJTlZPSUNFUydcbiAgICAgICAgJHNjb3BlLnBhcmVudHMgPSAkZmlyZWJhc2VPYmplY3QoJHJvb3RTY29wZS5yb290UmVmLmNoaWxkKFwicGFyZW50c1wiKSlcblxuXG4gICAgICAkc2NvcGUuYWRkTGVzc29uID0gKCkgLT5cbiAgICAgICAgdW5sZXNzICRzY29wZS5sZXNzb25Nb2RlbC5zdHVkZW50LmlkXG4gICAgICAgICAgYWxlcnQgJ1BsZWFzZSBzZWxlY3QgYSBzdHVkZW50IGZyb20gdGhlIGRyb3AgZG93biBtZW51LidcblxuICAgICAgICBpZiAkc2NvcGUubGVzc29uTW9kZWwuc3R1ZGVudC5pZCBhbmQgJHNjb3BlLmxlc3Nvbk1vZGVsLmxlbmd0aC5sZW5ndGggPiAwIGFuZCAkKCcjZGF0ZXBpY2tlci0wMScpLnZhbCgpLmxlbmd0aCA+IDBcbiAgICAgICAgICAkc2NvcGUubGVzc29uTW9kZWwuZGF0ZSA9IG1vbWVudCgkKCcjZGF0ZXBpY2tlci0wMScpLnZhbCgpLCAnTS9EL1lZWVknKS5mb3JtYXQoXCJNTU1NIERvIFlZWVlcIilcbiAgICAgICAgICAkcm9vdFNjb3BlLmN1cnJlbnRVc2VyUmVmLmNoaWxkKFwidGltZXNoZWV0cy8jeyRzY29wZS5jdXJyZW50VGltZVNoZWV0S2V5fS9sZXNzb25zXCIpLnB1c2goKS5zZXQgJHNjb3BlLmxlc3Nvbk1vZGVsXG4gICAgICAgICAgJHNjb3BlLmxlc3Nvbk1vZGVsID0ge3N0dWRlbnQ6IFwiXCIsIGxlbmd0aDogXCJcIiwgbm90ZXM6IFwiXCJ9XG5cbiAgICAgICRzY29wZS5yZW1vdmVMZXNzb24gPSAoaWQpIC0+XG4gICAgICAgICRyb290U2NvcGUuY3VycmVudFVzZXJSZWYuY2hpbGQoXCJ0aW1lc2hlZXRzLyN7JHNjb3BlLmN1cnJlbnRUaW1lU2hlZXRLZXl9L2xlc3NvbnMvI3tpZH1cIikuc2V0IG51bGxcblxuICAgICAgJHNjb3BlLnN1Ym1pdFRpbWVTaGVldCA9ICgpIC0+XG4gICAgICAgIHJlc3VsdCA9IGNvbmZpcm0oXCJBcmUgeW91IHN1cmU/IFlvdSBhcmUgZmluYWxpemluZyB5b3VyIHRpbWVzaGVldCBmb3IgdGhpcyBwYXkgcGVyaW9kLiBUaGlzIGFjdGlvbiBjYW5ub3QgYmUgdW5kb25lLlwiKVxuICAgICAgICBpZiByZXN1bHRcbiAgICAgICAgICAkcm9vdFNjb3BlLmN1cnJlbnRVc2VyUmVmLmNoaWxkKFwidGltZXNoZWV0cy8jeyRzY29wZS5jdXJyZW50VGltZVNoZWV0S2V5fS9zdWJtaXR0ZWRcIikuc2V0IHRydWVcblxuICAgICAgICAgIHRvdGFsVGltZSA9IDAuMDBcbiAgICAgICAgICBhbmd1bGFyLmZvckVhY2ggJHNjb3BlLmN1cnJlbnRUaW1lU2hlZXQsICh2YWx1ZSwga2V5KSAtPlxuICAgICAgICAgICAgdG90YWxUaW1lID0gdG90YWxUaW1lICsgcGFyc2VGbG9hdCh2YWx1ZS5sZW5ndGgpXG4gICAgICAgICAgICAkcm9vdFNjb3BlLnJvb3RSZWYuY2hpbGQoXCJwYXJlbnRzLyN7dmFsdWUuc3R1ZGVudC5wYXJlbnQucGFyZW50SWR9L2ludm9pY2VzLyN7JHNjb3BlLmN1cnJlbnRUaW1lU2hlZXRLZXl9XCIpLnB1c2goKS5zZXQge2RhdGU6IHZhbHVlLmRhdGUsIHN0dWRlbnROYW1lOiB2YWx1ZS5zdHVkZW50Lm5hbWUsIGxlbmd0aDogdmFsdWUubGVuZ3RoLCBub3RlczogdmFsdWUubm90ZXMsIG1lbnRvcklkOiAkcm9vdFNjb3BlLmN1cnJlbnRVaWQsIG1lbnRvck5hbWU6IFwiI3skcm9vdFNjb3BlLnVzZXJCYXNpYy5maXJzdE5hbWV9ICN7JHJvb3RTY29wZS51c2VyQmFzaWMubGFzdE5hbWV9XCJ9XG5cbiAgICAgICAgICAkcm9vdFNjb3BlLmN1cnJlbnRVc2VyUmVmLmNoaWxkKFwidGltZXNoZWV0cy8jeyRzY29wZS5jdXJyZW50VGltZVNoZWV0S2V5fS90b3RhbFRpbWVcIikuc2V0IHRvdGFsVGltZVxuICAgICAgICAgICRyb290U2NvcGUuY3VycmVudFVzZXJSZWYuY2hpbGQoXCJ0aW1lc2hlZXRzLyN7JHNjb3BlLmN1cnJlbnRUaW1lU2hlZXRLZXl9XCIpLnNldFByaW9yaXR5ICdzdWJtaXR0ZWQnXG5cblxuICAgICAgJHNjb3BlLm1hbmFnZU1lbnRvciA9ICh1c2VyaWQsIG1lbnRvcikgLT5cbiAgICAgICAgJHNjb3BlLnNob3dNYW5hZ2VNZW50b3IgPSB0cnVlXG4gICAgICAgICRzY29wZS5zaG93TWFuYWdlTWVudG9yT2JqID0gbWVudG9yXG5cblxuICAgICAgJHNjb3BlLmNhbGN1bGF0ZVRvdGFsSG91cnNGb3JBUGFyZW50ID0gKGxlc3NvbnMpIC0+XG4gICAgICAgIHRvdGFsSG91cnMgPSAwXG4gICAgICAgIGZvciBrLHYgb2YgbGVzc29uc1xuICAgICAgICAgIHRvdGFsSG91cnMgPSBwYXJzZUZsb2F0KHYubGVuZ3RoKSArIHRvdGFsSG91cnNcbiAgICAgICAgdG90YWxIb3Vyc1xuXG4gICAgICAkc2NvcGUubWFuYWdlUGFyZW50ID0gKHVzZXJpZCwgcGFyZW50KSAtPlxuICAgICAgICAkc2NvcGUuc2hvd01hbmFnZVBhcmVudCA9IHRydWVcbiAgICAgICAgJHNjb3BlLnNob3dNYW5hZ2VQYXJlbnRPYmogPSBwYXJlbnRcblxuXG4gICAgICAkc2NvcGUuY2hlY2tDdXJyZW50UGF5UGVyaW9kID0gKCkgLT5cbiAgICAgICAgbW9tZW50KCkuaXNCZXR3ZWVuKCRzY29wZS5zdGFydERhdGUsICRzY29wZS5lbmREYXRlKVxuXG5cblxuXG4gIERhc2hCb2FyZENvbnRyb2xsZXIuJGluamVjdCA9IFtcIiRzY29wZVwiLCBcIiRyb290U2NvcGVcIiwgXCIkc2NlXCIsIFwiRmlyZWJhc2VTZXJ2aWNlXCIsIFwiJHdpbmRvd1wiLCBcIiRmaXJlYmFzZU9iamVjdFwiLCBcIiRmaXJlYmFzZUFycmF5XCJdXG5cbiAgVGltZVNoZWV0QXBwLmNvbnRyb2xsZXIgJ0Rhc2hCb2FyZENvbnRyb2xsZXInLCBEYXNoQm9hcmRDb250cm9sbGVyXG5cbiAgRGFzaEJvYXJkQ29udHJvbGxlciJdfQ==
