define(['app/base', 'angularjs', 'fbase'], function(TimeSheetApp) {
  var DashBoardController;
  DashBoardController = (function() {
    function DashBoardController($scope, $rootScope, $sce, FirebaseService, $window, $firebaseObject, $firebaseArray) {
      $scope.moment = moment;
      $scope.startDate = moment({
        year: 2015,
        month: 6,
        day: 5
      }).add(Math.floor((moment().diff(moment({
        year: 2015,
        month: 6,
        day: 5
      }), 'days')) / 14) * 13, 'd');
      $scope.endDate = moment({
        year: 2015,
        month: 6,
        day: 5
      }).add(Math.ceil((moment().diff(moment({
        year: 2015,
        month: 6,
        day: 5
      }), 'days')) / 14) * 13, 'd');
      $scope.formattedStart = $scope.startDate.format('M/D/YY');
      $scope.formattedEnd = $scope.endDate.format('M/D/YY');
      $scope.currentTimeSheetKey = (moment($scope.formattedStart, 'M/D/YY').format("MMMM Do YYYY")) + "-" + (moment($scope.formattedEnd, 'M/D/YY').format("MMMM Do YYYY"));
      $scope.currentPayPeriod = (moment($scope.formattedStart, 'M/D/YY').format("MMMM Do YYYY")) + "-" + (moment($scope.formattedEnd, 'M/D/YY').format("MMMM Do YYYY"));
      $scope.lessonModel = {
        student: "",
        length: "",
        notes: ""
      };
      FirebaseService.rootRef.child('students').once("value", function(snap) {
        var k, students, v, _ref;
        students = [];
        _ref = snap.val();
        for (k in _ref) {
          v = _ref[k];
          students.push({
            id: k,
            name: v.firstName + " " + v.lastName,
            parent: v.parent
          });
        }
        return $scope.$apply(function() {
          return $scope.students = students;
        });
      });
      $rootScope.$watch('userBasic', function(newVal, oldVal) {
        if ($rootScope.userBasic) {
          if (!($rootScope.userBasic.manager || $rootScope.userBasic.mentor)) {
            return $rootScope.roleNotSet = true;
          } else {
            return $scope.loadDashboard();
          }
        }
      });
      $scope.nextPeriod = function() {
        var oldEndDate;
        oldEndDate = $scope.endDate;
        $scope.startDate = oldEndDate.add(1, 'd');
        $scope.formattedStart = $scope.startDate.format('M/D/YY');
        $scope.endDate = $scope.startDate.add(13, 'd');
        $scope.formattedEnd = $scope.endDate.format('M/D/YY');
        $scope.currentTimeSheetKey = (moment($scope.formattedStart, 'M/D/YY').format("MMMM Do YYYY")) + "-" + (moment($scope.formattedEnd, 'M/D/YY').format("MMMM Do YYYY"));
        $scope.reRenderDatePicker();
        if ($scope.currentDash === 'Mentor') {
          if ($scope.currentTimeSheet) {
            $scope.currentTimeSheet.$destroy();
          }
          $scope.currentTimeSheet = $firebaseObject($rootScope.currentUserRef.child("timesheets/" + $scope.currentTimeSheetKey + "/lessons"));
          return $scope.currentTimeSheetSubmitted = $firebaseObject($rootScope.currentUserRef.child("timesheets/" + $scope.currentTimeSheetKey + "/submitted"));
        }
      };
      $scope.prevPeriod = function() {
        $scope.startDate = moment($scope.formattedStart, 'M/D/YY').subtract(14, 'd');
        $scope.formattedStart = $scope.startDate.format('M/D/YY');
        $scope.endDate = moment($scope.formattedEnd, 'M/D/YY').subtract(14, 'd');
        $scope.formattedEnd = $scope.endDate.format('M/D/YY');
        $scope.currentTimeSheetKey = (moment($scope.formattedStart, 'M/D/YY').format("MMMM Do YYYY")) + "-" + (moment($scope.formattedEnd, 'M/D/YY').format("MMMM Do YYYY"));
        $scope.reRenderDatePicker();
        if ($scope.currentDash === 'Mentor') {
          if ($scope.currentTimeSheet) {
            $scope.currentTimeSheet.$destroy();
          }
          $scope.currentTimeSheet = $firebaseObject($rootScope.currentUserRef.child("timesheets/" + $scope.currentTimeSheetKey + "/lessons"));
          return $scope.currentTimeSheetSubmitted = $firebaseObject($rootScope.currentUserRef.child("timesheets/" + $scope.currentTimeSheetKey + "/submitted"));
        }
      };
      $scope.reRenderDatePicker = function() {
        var maxDate, minDate;
        minDate = $scope.startDate.toDate();
        maxDate = $scope.endDate.toDate();
        $('#datepicker-01').datepicker("option", "maxDate", maxDate);
        $('#datepicker-01').datepicker("option", "minDate", minDate);
      };
      $scope.loadDashboard = function() {
        var datepickerSelector, maxDate, minDate;
        if ($rootScope.userBasic.manager) {
          $scope.selectedTab = 'TIMESHEETS';
          $scope.currentDash = 'Manager';
          return $scope.mentors = $firebaseObject(FirebaseService.rootRef.child('users').startAt('mentor').endAt('mentor'));
        } else {
          $scope.currentDash = 'Mentor';
          $scope.currentTimeSheet = $firebaseArray($rootScope.currentUserRef.child("timesheets/" + $scope.currentTimeSheetKey + "/lessons"));
          $scope.currentTimeSheetSubmitted = $firebaseObject($rootScope.currentUserRef.child("timesheets/" + $scope.currentTimeSheetKey + "/submitted"));
          minDate = $scope.startDate.toDate();
          maxDate = $scope.endDate.toDate();
          datepickerSelector = $('#datepicker-01');
          datepickerSelector.datepicker({
            showOtherMonths: true,
            selectOtherMonths: true,
            minDate: minDate,
            maxDate: maxDate,
            dateFormat: 'm/d/yy',
            yearRange: '-1:+1'
          }).prev('.input-group-btn').on('click', function(e) {
            e && e.preventDefault();
            datepickerSelector.focus();
          });
          $.extend($.datepicker, {
            _checkOffset: function(inst, offset, isFixed) {
              return offset;
            }
          });
          datepickerSelector.datepicker('widget').css({
            'margin-left': -datepickerSelector.prev('.input-group-btn').find('.btn').outerWidth() + 3
          });
          return $scope.reRenderDatePicker();
        }
      };
      $scope.openTimesheetsTab = function() {
        return $scope.selectedTab = 'TIMESHEETS';
      };
      $scope.formatLabel = function(item) {
        if (item) {
          return item.name;
        }
      };
      $scope.openInvoicesTab = function() {
        $scope.selectedTab = 'INVOICES';
        return $scope.parents = $firebaseObject($rootScope.rootRef.child("parents"));
      };
      $scope.addLesson = function() {
        var lessonRef;
        if (!$scope.lessonModel.student.id) {
          alert('Please select a student from the drop down menu.');
        }
        if ($scope.lessonModel.student.id && $scope.lessonModel.length.length > 0 && $('#datepicker-01').val().length > 0) {
          $scope.lessonModel.date = moment($('#datepicker-01').val(), 'M/D/YYYY').format("MMMM Do YYYY");
          lessonRef = $rootScope.currentUserRef.child("timesheets/" + $scope.currentTimeSheetKey + "/lessons").push();
          lessonRef.set($scope.lessonModel);
          lessonRef.child('recordedDate').set(moment($('#datepicker-01').val(), 'M/D/YYYY').unix());
          return $scope.lessonModel = {
            student: "",
            length: "",
            notes: ""
          };
        }
      };
      $scope.removeLesson = function(id) {
        return $rootScope.currentUserRef.child("timesheets/" + $scope.currentTimeSheetKey + "/lessons/" + id).set(null);
      };
      $scope.submitTimeSheet = function() {
        var result, totalTime;
        result = confirm("Are you sure? You are finalizing your timesheet for this pay period. This action cannot be undone.");
        if (result) {
          $rootScope.currentUserRef.child("timesheets/" + $scope.currentTimeSheetKey + "/submitted").set(true);
          totalTime = 0.00;
          angular.forEach($scope.currentTimeSheet, function(value, key) {
            totalTime = totalTime + parseFloat(value.length);
            return $rootScope.rootRef.child("parents/" + value.student.parent.parentId + "/invoices/" + $scope.currentTimeSheetKey).push().set({
              recordedDate: value.recordedDate,
              date: value.date,
              studentName: value.student.name,
              length: value.length,
              notes: value.notes,
              mentorId: $rootScope.currentUid,
              mentorName: $rootScope.userBasic.firstName + " " + $rootScope.userBasic.lastName
            });
          });
          $rootScope.currentUserRef.child("timesheets/" + $scope.currentTimeSheetKey + "/totalTime").set(totalTime);
          return $rootScope.currentUserRef.child("timesheets/" + $scope.currentTimeSheetKey).setPriority('submitted');
        }
      };
      $scope.manageMentor = function(userid, mentor) {
        $scope.showManageMentor = true;
        return $scope.showManageMentorObj = mentor;
      };
      $scope.calculateTotalHoursForAParent = function(lessons) {
        var k, totalHours, v;
        totalHours = 0;
        for (k in lessons) {
          v = lessons[k];
          totalHours = parseFloat(v.length) + totalHours;
        }
        return totalHours;
      };
      $scope.manageParent = function(userid, parent) {
        $scope.showManageParent = true;
        return $scope.showManageParentObj = parent;
      };
      $scope.checkCurrentPayPeriod = function() {
        return moment().isBetween($scope.startDate, $scope.endDate);
      };
      $scope.convertToArray = function(obj) {
        return _.toArray(obj);
      };
    }

    return DashBoardController;

  })();
  DashBoardController.$inject = ["$scope", "$rootScope", "$sce", "FirebaseService", "$window", "$firebaseObject", "$firebaseArray"];
  TimeSheetApp.controller('DashBoardController', DashBoardController);
  return DashBoardController;
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2tyaXNobmFyb2toYWxlL2NvZGUvbGV2ZWwvbGV2ZWwvdGltZXNoZWV0YXBwL3B1YmxpYy9qYXZhc2NyaXB0cy9hcHAvY29udHJvbGxlcnMvZGFzaGJvYXJkX2NvbnRyb2xsZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMva3Jpc2huYXJva2hhbGUvY29kZS9sZXZlbC9sZXZlbC90aW1lc2hlZXRhcHAvYXNzZXRzL2phdmFzY3JpcHRzL2FwcC9jb250cm9sbGVycy9kYXNoYm9hcmRfY29udHJvbGxlci5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsTUFBQSxDQUFPLENBQUUsVUFBRixFQUFhLFdBQWIsRUFBMEIsT0FBMUIsQ0FBUCxFQUEwQyxTQUFDLFlBQUQsR0FBQTtBQUV4QyxNQUFBLG1CQUFBO0FBQUEsRUFBTTtBQUVTLElBQUEsNkJBQUMsTUFBRCxFQUFTLFVBQVQsRUFBcUIsSUFBckIsRUFBMkIsZUFBM0IsRUFBNEMsT0FBNUMsRUFBcUQsZUFBckQsRUFBc0UsY0FBdEUsR0FBQTtBQUVYLE1BQUEsTUFBTSxDQUFDLE1BQVAsR0FBZ0IsTUFBaEIsQ0FBQTtBQUFBLE1BQ0EsTUFBTSxDQUFDLFNBQVAsR0FBbUIsTUFBQSxDQUFPO0FBQUEsUUFBRSxJQUFBLEVBQU0sSUFBUjtBQUFBLFFBQWMsS0FBQSxFQUFPLENBQXJCO0FBQUEsUUFBd0IsR0FBQSxFQUFLLENBQTdCO09BQVAsQ0FBdUMsQ0FBQyxHQUF4QyxDQUE0QyxJQUFJLENBQUMsS0FBTCxDQUFXLENBQUMsTUFBQSxDQUFBLENBQVEsQ0FBQyxJQUFULENBQWMsTUFBQSxDQUFPO0FBQUEsUUFBRSxJQUFBLEVBQU0sSUFBUjtBQUFBLFFBQWMsS0FBQSxFQUFPLENBQXJCO0FBQUEsUUFBd0IsR0FBQSxFQUFLLENBQTdCO09BQVAsQ0FBZCxFQUF3RCxNQUF4RCxDQUFELENBQUEsR0FBaUUsRUFBNUUsQ0FBQSxHQUFnRixFQUE1SCxFQUFpSSxHQUFq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QUFhLENBQWIsQ0FBQTtBQUNBLGFBQUEsWUFBQTt5QkFBQTtBQUNFLFVBQUEsVUFBQSxHQUFhLFVBQUEsQ0FBVyxDQUFDLENBQUMsTUFBYixDQUFBLEdBQXVCLFVBQXBDLENBREY7QUFBQSxTQURBO2VBR0EsV0FKcUM7TUFBQSxDQXpKdkMsQ0FBQTtBQUFBLE1BK0pBLE1BQU0sQ0FBQyxZQUFQLEdBQXNCLFNBQUMsTUFBRCxFQUFTLE1BQVQsR0FBQTtBQUNwQixRQUFBLE1BQU0sQ0FBQyxnQkFBUCxHQUEwQixJQUExQixDQUFBO2VBQ0EsTUFBTSxDQUFDLG1CQUFQLEdBQTZCLE9BRlQ7TUFBQSxDQS9KdEIsQ0FBQTtBQUFBLE1Bb0tBLE1BQU0sQ0FBQyxxQkFBUCxHQUErQixTQUFBLEdBQUE7ZUFDN0IsTUFBQSxDQUFBLENBQVEsQ0FBQyxTQUFULENBQW1CLE1BQU0sQ0FBQyxTQUExQixFQUFxQyxNQUFNLENBQUMsT0FBNUMsRUFENkI7TUFBQSxDQXBLL0IsQ0FBQTtBQUFBLE1Bd0tBLE1BQU0sQ0FBQyxjQUFQLEdBQXdCLFNBQUMsR0FBRCxHQUFBO2VBQ3RCLENBQUMsQ0FBQyxPQUFGLENBQVUsR0FBVixFQURzQjtNQUFBLENBeEt4QixDQUZXO0lBQUEsQ0FBYjs7K0JBQUE7O01BRkYsQ0FBQTtBQUFBLEVBaUxBLG1CQUFtQixDQUFDLE9BQXBCLEdBQThCLENBQUUsUUFBRixFQUFZLFlBQVosRUFBMEIsTUFBMUIsRUFBa0MsaUJBQWxDLEVBQXFELFNBQXJELEVBQWdFLGlCQUFoRSxFQUFtRixnQkFBbkYsQ0FqTDlCLENBQUE7QUFBQSxFQW1MQSxZQUFZLENBQUMsVUFBYixDQUF5QixxQkFBekIsRUFBK0MsbUJBQS9DLENBbkxBLENBQUE7U0FxTEEsb0JBdkx3QztBQUFBLENBQTFDLENBQUEsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImRlZmluZSBbJ2FwcC9iYXNlJywnYW5ndWxhcmpzJywgJ2ZiYXNlJ10sIChUaW1lU2hlZXRBcHApIC0+XG5cbiAgY2xhc3MgRGFzaEJvYXJkQ29udHJvbGxlclxuXG4gICAgY29uc3RydWN0b3I6ICgkc2NvcGUsICRyb290U2NvcGUsICRzY2UsIEZpcmViYXNlU2VydmljZSwgJHdpbmRvdywgJGZpcmViYXNlT2JqZWN0LCAkZmlyZWJhc2VBcnJheSkgLT5cblxuICAgICAgJHNjb3BlLm1vbWVudCA9IG1vbWVudFxuICAgICAgJHNjb3BlLnN0YXJ0RGF0ZSA9IG1vbWVudCh7IHllYXIgOjIwMTUsIG1vbnRoIDo2LCBkYXkgOjV9KS5hZGQoTWF0aC5mbG9vcigobW9tZW50KCkuZGlmZihtb21lbnQoeyB5ZWFyIDoyMDE1LCBtb250aCA6NiwgZGF5IDo1fSksICdkYXlzJykpLzE0KSoxMywgJ2QnKVxuICAgICAgJHNjb3BlLmVuZERhdGUgPSBtb21lbnQoeyB5ZWFyIDoyMDE1LCBtb250aCA6NiwgZGF5IDo1fSkuYWRkKE1hdGguY2VpbCgobW9tZW50KCkuZGlmZihtb21lbnQoeyB5ZWFyIDoyMDE1LCBtb250aCA6NiwgZGF5IDo1fSksICdkYXlzJykpLzE0KSoxMywgJ2QnKVxuXG5cbiAgICAgICRzY29wZS5mb3JtYXR0ZWRTdGFydCA9ICRzY29wZS5zdGFydERhdGUuZm9ybWF0KCdNL0QvWVknKVxuICAgICAgJHNjb3BlLmZvcm1hdHRlZEVuZCA9ICRzY29wZS5lbmREYXRlLmZvcm1hdCgnTS9EL1lZJylcblxuICAgICAgJHNjb3BlLmN1cnJlbnRUaW1lU2hlZXRLZXkgPSBcIiN7bW9tZW50KCRzY29wZS5mb3JtYXR0ZWRTdGFydCwgJ00vRC9ZWScpLmZvcm1hdChcIk1NTU0gRG8gWVlZWVwiKX0tI3ttb21lbnQoJHNjb3BlLmZvcm1hdHRlZEVuZCwgJ00vRC9ZWScpLmZvcm1hdChcIk1NTU0gRG8gWVlZWVwiKX1cIlxuICAgICAgJHNjb3BlLmN1cnJlbnRQYXlQZXJpb2QgPSBcIiN7bW9tZW50KCRzY29wZS5mb3JtYXR0ZWRTdGFydCwgJ00vRC9ZWScpLmZvcm1hdChcIk1NTU0gRG8gWVlZWVwiKX0tI3ttb21lbnQoJHNjb3BlLmZvcm1hdHRlZEVuZCwgJ00vRC9ZWScpLmZvcm1hdChcIk1NTU0gRG8gWVlZWVwiKX1cIlxuXG5cbiAgICAgICRzY29wZS5sZXNzb25Nb2RlbCA9IHtzdHVkZW50OiBcIlwiLCBsZW5ndGg6IFwiXCIsIG5vdGVzOiBcIlwifVxuXG4gICAgICBGaXJlYmFzZVNlcnZpY2Uucm9vdFJlZi5jaGlsZCgnc3R1ZGVudHMnKS5vbmNlIFwidmFsdWVcIiwgKHNuYXApIC0+XG4gICAgICAgIHN0dWRlbnRzID0gW11cbiAgICAgICAgZm9yIGssdiBvZiBzbmFwLnZhbCgpXG4gICAgICAgICAgc3R1ZGVudHMucHVzaCB7aWQ6IGssIG5hbWU6IFwiI3t2LmZpcnN0TmFtZX0gI3t2Lmxhc3ROYW1lfVwiLCBwYXJlbnQ6IHYucGFyZW50fVxuXG4gICAgICAgICRzY29wZS4kYXBwbHkgLT5cbiAgICAgICAgICAkc2NvcGUuc3R1ZGVudHMgPSBzdHVkZW50c1xuXG5cbiAgICAgICRyb290U2NvcGUuJHdhdGNoICd1c2VyQmFzaWMnLCAobmV3VmFsLCBvbGRWYWwpIC0+XG4gICAgICAgIGlmICRyb290U2NvcGUudXNlckJhc2ljXG4gICAgICAgICAgdW5sZXNzICRyb290U2NvcGUudXNlckJhc2ljLm1hbmFnZXIgfHwgJHJvb3RTY29wZS51c2VyQmFzaWMubWVudG9yXG4gICAgICAgICAgICAkcm9vdFNjb3BlLnJvbGVOb3RTZXQgPSB0cnVlXG4gICAgICAgICAgZWxzZVxuICAgICAgICAgICAgJHNjb3BlLmxvYWREYXNoYm9hcmQoKVxuXG5cblxuICAgICAgJHNjb3BlLm5leHRQZXJpb2QgPSAoKSAtPlxuICAgICAgICBvbGRFbmREYXRlID0gJHNjb3BlLmVuZERhdGVcbiAgICAgICAgJHNjb3BlLnN0YXJ0RGF0ZSA9IG9sZEVuZERhdGUuYWRkKDEsICdkJylcbiAgICAgICAgJHNjb3BlLmZvcm1hdHRlZFN0YXJ0ID0gJHNjb3BlLnN0YXJ0RGF0ZS5mb3JtYXQoJ00vRC9ZWScpXG5cbiAgICAgICAgJHNjb3BlLmVuZERhdGUgPSAkc2NvcGUuc3RhcnREYXRlLmFkZCgxMywgJ2QnKVxuICAgICAgICAkc2NvcGUuZm9ybWF0dGVkRW5kID0gJHNjb3BlLmVuZERhdGUuZm9ybWF0KCdNL0QvWVknKVxuXG4gICAgICAgICRzY29wZS5jdXJyZW50VGltZVNoZWV0S2V5ID0gXCIje21vbWVudCgkc2NvcGUuZm9ybWF0dGVkU3RhcnQsICdNL0QvWVknKS5mb3JtYXQoXCJNTU1NIERvIFlZWVlcIil9LSN7bW9tZW50KCRzY29wZS5mb3JtYXR0ZWRFbmQsICdNL0QvWVknKS5mb3JtYXQoXCJNTU1NIERvIFlZWVlcIil9XCJcblxuICAgICAgICAkc2NvcGUucmVSZW5kZXJEYXRlUGlja2VyKClcblxuICAgICAgICBpZiAkc2NvcGUuY3VycmVudERhc2ggPT0gJ01lbnRvcidcbiAgICAgICAgICAkc2NvcGUuY3VycmVudFRpbWVTaGVldC4kZGVzdHJveSgpIGlmICRzY29wZS5jdXJyZW50VGltZVNoZWV0XG4gICAgICAgICAgJHNjb3BlLmN1cnJlbnRUaW1lU2hlZXQgPSAkZmlyZWJhc2VPYmplY3QoJHJvb3RTY29wZS5jdXJyZW50VXNlclJlZi5jaGlsZChcInRpbWVzaGVldHMvI3skc2NvcGUuY3VycmVudFRpbWVTaGVldEtleX0vbGVzc29uc1wiKSlcbiAgICAgICAgICAkc2NvcGUuY3VycmVudFRpbWVTaGVldFN1Ym1pdHRlZCA9ICRmaXJlYmFzZU9iamVjdCgkcm9vdFNjb3BlLmN1cnJlbnRVc2VyUmVmLmNoaWxkKFwidGltZXNoZWV0cy8jeyRzY29wZS5jdXJyZW50VGltZVNoZWV0S2V5fS9zdWJtaXR0ZWRcIikpXG5cblxuICAgICAgJHNjb3BlLnByZXZQZXJpb2QgPSAoKSAtPlxuICAgICAgICAkc2NvcGUuc3RhcnREYXRlID0gbW9tZW50KCRzY29wZS5mb3JtYXR0ZWRTdGFydCwgJ00vRC9ZWScpLnN1YnRyYWN0KDE0LCAnZCcpXG4gICAgICAgICRzY29wZS5mb3JtYXR0ZWRTdGFydCA9ICRzY29wZS5zdGFydERhdGUuZm9ybWF0KCdNL0QvWVknKVxuXG4gICAgICAgICRzY29wZS5lbmREYXRlID0gbW9tZW50KCRzY29wZS5mb3JtYXR0ZWRFbmQsICdNL0QvWVknKS5zdWJ0cmFjdCgxNCwgJ2QnKVxuICAgICAgICAkc2NvcGUuZm9ybWF0dGVkRW5kID0gJHNjb3BlLmVuZERhdGUuZm9ybWF0KCdNL0QvWVknKVxuXG4gICAgICAgICRzY29wZS5jdXJyZW50VGltZVNoZWV0S2V5ID0gXCIje21vbWVudCgkc2NvcGUuZm9ybWF0dGVkU3RhcnQsICdNL0QvWVknKS5mb3JtYXQoXCJNTU1NIERvIFlZWVlcIil9LSN7bW9tZW50KCRzY29wZS5mb3JtYXR0ZWRFbmQsICdNL0QvWVknKS5mb3JtYXQoXCJNTU1NIERvIFlZWVlcIil9XCJcblxuICAgICAgICAkc2NvcGUucmVSZW5kZXJEYXRlUGlja2VyKClcblxuICAgICAgICBpZiAkc2NvcGUuY3VycmVudERhc2ggPT0gJ01lbnRvcidcbiAgICAgICAgICAkc2NvcGUuY3VycmVudFRpbWVTaGVldC4kZGVzdHJveSgpIGlmICRzY29wZS5jdXJyZW50VGltZVNoZWV0XG4gICAgICAgICAgJHNjb3BlLmN1cnJlbnRUaW1lU2hlZXQgPSAkZmlyZWJhc2VPYmplY3QoJHJvb3RTY29wZS5jdXJyZW50VXNlclJlZi5jaGlsZChcInRpbWVzaGVldHMvI3skc2NvcGUuY3VycmVudFRpbWVTaGVldEtleX0vbGVzc29uc1wiKSlcbiAgICAgICAgICAkc2NvcGUuY3VycmVudFRpbWVTaGVldFN1Ym1pdHRlZCA9ICRmaXJlYmFzZU9iamVjdCgkcm9vdFNjb3BlLmN1cnJlbnRVc2VyUmVmLmNoaWxkKFwidGltZXNoZWV0cy8jeyRzY29wZS5jdXJyZW50VGltZVNoZWV0S2V5fS9zdWJtaXR0ZWRcIikpXG5cblxuICAgICAgJHNjb3BlLnJlUmVuZGVyRGF0ZVBpY2tlciA9ICgpIC0+XG4gICAgICAgIG1pbkRhdGUgPSAkc2NvcGUuc3RhcnREYXRlLnRvRGF0ZSgpXG4gICAgICAgIG1heERhdGUgPSAkc2NvcGUuZW5kRGF0ZS50b0RhdGUoKVxuICAgICAgICAkKCcjZGF0ZXBpY2tlci0wMScpLmRhdGVwaWNrZXIoIFwib3B0aW9uXCIsIFwibWF4RGF0ZVwiLCBtYXhEYXRlIClcbiAgICAgICAgJCgnI2RhdGVwaWNrZXItMDEnKS5kYXRlcGlja2VyKCBcIm9wdGlvblwiLCBcIm1pbkRhdGVcIiwgbWluRGF0ZSApXG4gICAgICAgIHJldHVyblxuXG5cbiAgICAgICRzY29wZS5sb2FkRGFzaGJvYXJkID0gKCkgLT5cbiAgICAgICAgaWYgJHJvb3RTY29wZS51c2VyQmFzaWMubWFuYWdlclxuICAgICAgICAgICRzY29wZS5zZWxlY3RlZFRhYiA9ICdUSU1FU0hFRVRTJ1xuICAgICAgICAgICRzY29wZS5jdXJyZW50RGFzaCA9ICdNYW5hZ2VyJ1xuICAgICAgICAgICRzY29wZS5tZW50b3JzID0gJGZpcmViYXNlT2JqZWN0KEZpcmViYXNlU2VydmljZS5yb290UmVmLmNoaWxkKCd1c2VycycpLnN0YXJ0QXQoJ21lbnRvcicpLmVuZEF0KCdtZW50b3InKSlcblxuICAgICAgICBlbHNlXG4gICAgICAgICAgJHNjb3BlLmN1cnJlbnREYXNoID0gJ01lbnRvcidcblxuICAgICAgICAgICRzY29wZS5jdXJyZW50VGltZVNoZWV0ID0gJGZpcmViYXNlQXJyYXkoJHJvb3RTY29wZS5jdXJyZW50VXNlclJlZi5jaGlsZChcInRpbWVzaGVldHMvI3skc2NvcGUuY3VycmVudFRpbWVTaGVldEtleX0vbGVzc29uc1wiKSlcbiAgICAgICAgICAkc2NvcGUuY3VycmVudFRpbWVTaGVldFN1Ym1pdHRlZCA9ICRmaXJlYmFzZU9iamVjdCgkcm9vdFNjb3BlLmN1cnJlbnRVc2VyUmVmLmNoaWxkKFwidGltZXNoZWV0cy8jeyRzY29wZS5jdXJyZW50VGltZVNoZWV0S2V5fS9zdWJtaXR0ZWRcIikpXG5cbiAgICAgICAgICBtaW5EYXRlID0gJHNjb3BlLnN0YXJ0RGF0ZS50b0RhdGUoKVxuICAgICAgICAgIG1heERhdGUgPSAkc2NvcGUuZW5kRGF0ZS50b0RhdGUoKVxuXG4gICAgICAgICAgZGF0ZXBpY2tlclNlbGVjdG9yID0gJCgnI2RhdGVwaWNrZXItMDEnKVxuICAgICAgICAgIGRhdGVwaWNrZXJTZWxlY3Rvci5kYXRlcGlja2VyKFxuICAgICAgICAgICAgc2hvd090aGVyTW9udGhzOiB0cnVlXG4gICAgICAgICAgICBzZWxlY3RPdGhlck1vbnRoczogdHJ1ZVxuICAgICAgICAgICAgbWluRGF0ZTogbWluRGF0ZVxuICAgICAgICAgICAgbWF4RGF0ZTogbWF4RGF0ZVxuICAgICAgICAgICAgZGF0ZUZvcm1hdDogJ20vZC95eSdcbiAgICAgICAgICAgIHllYXJSYW5nZTogJy0xOisxJykucHJldignLmlucHV0LWdyb3VwLWJ0bicpLm9uICdjbGljaycsIChlKSAtPlxuICAgICAgICAgICAgICBlIGFuZCBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICAgICAgZGF0ZXBpY2tlclNlbGVjdG9yLmZvY3VzKClcbiAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgJC5leHRlbmQgJC5kYXRlcGlja2VyLCBfY2hlY2tPZmZzZXQ6IChpbnN0LCBvZmZzZXQsIGlzRml4ZWQpIC0+XG4gICAgICAgICAgICBvZmZzZXRcbiAgICAgICAgICBkYXRlcGlja2VyU2VsZWN0b3IuZGF0ZXBpY2tlcignd2lkZ2V0JykuY3NzICdtYXJnaW4tbGVmdCc6IC1kYXRlcGlja2VyU2VsZWN0b3IucHJldignLmlucHV0LWdyb3VwLWJ0bicpLmZpbmQoJy5idG4nKS5vdXRlcldpZHRoKCkgKyAzXG5cbiAgICAgICAgICAkc2NvcGUucmVSZW5kZXJEYXRlUGlja2VyKClcblxuICAgICAgJHNjb3BlLm9wZW5UaW1lc2hlZXRzVGFiID0gKCkgLT5cbiAgICAgICAgJHNjb3BlLnNlbGVjdGVkVGFiID0gJ1RJTUVTSEVFVFMnXG5cblxuICAgICAgJHNjb3BlLmZvcm1hdExhYmVsID0gKGl0ZW0pIC0+XG4gICAgICAgIGl0ZW0ubmFtZSBpZiBpdGVtXG5cblxuICAgICAgJHNjb3BlLm9wZW5JbnZvaWNlc1RhYiA9ICgpIC0+XG4gICAgICAgICRzY29wZS5zZWxlY3RlZFRhYiA9ICdJTlZPSUNFUydcbiAgICAgICAgJHNjb3BlLnBhcmVudHMgPSAkZmlyZWJhc2VPYmplY3QoJHJvb3RTY29wZS5yb290UmVmLmNoaWxkKFwicGFyZW50c1wiKSlcblxuXG4gICAgICAkc2NvcGUuYWRkTGVzc29uID0gKCkgLT5cbiAgICAgICAgdW5sZXNzICRzY29wZS5sZXNzb25Nb2RlbC5zdHVkZW50LmlkXG4gICAgICAgICAgYWxlcnQgJ1BsZWFzZSBzZWxlY3QgYSBzdHVkZW50IGZyb20gdGhlIGRyb3AgZG93biBtZW51LidcblxuICAgICAgICBpZiAkc2NvcGUubGVzc29uTW9kZWwuc3R1ZGVudC5pZCBhbmQgJHNjb3BlLmxlc3Nvbk1vZGVsLmxlbmd0aC5sZW5ndGggPiAwIGFuZCAkKCcjZGF0ZXBpY2tlci0wMScpLnZhbCgpLmxlbmd0aCA+IDBcbiAgICAgICAgICAkc2NvcGUubGVzc29uTW9kZWwuZGF0ZSA9IG1vbWVudCgkKCcjZGF0ZXBpY2tlci0wMScpLnZhbCgpLCAnTS9EL1lZWVknKS5mb3JtYXQoXCJNTU1NIERvIFlZWVlcIilcbiAgICAgICAgICBsZXNzb25SZWYgPSAkcm9vdFNjb3BlLmN1cnJlbnRVc2VyUmVmLmNoaWxkKFwidGltZXNoZWV0cy8jeyRzY29wZS5jdXJyZW50VGltZVNoZWV0S2V5fS9sZXNzb25zXCIpLnB1c2goKVxuICAgICAgICAgIGxlc3NvblJlZi5zZXQgJHNjb3BlLmxlc3Nvbk1vZGVsXG4gICAgICAgICAgbGVzc29uUmVmLmNoaWxkKCdyZWNvcmRlZERhdGUnKS5zZXQgbW9tZW50KCQoJyNkYXRlcGlja2VyLTAxJykudmFsKCksICdNL0QvWVlZWScpLnVuaXgoKVxuICAgICAgICAgICRzY29wZS5sZXNzb25Nb2RlbCA9IHtzdHVkZW50OiBcIlwiLCBsZW5ndGg6IFwiXCIsIG5vdGVzOiBcIlwifVxuXG4gICAgICAkc2NvcGUucmVtb3ZlTGVzc29uID0gKGlkKSAtPlxuICAgICAgICAkcm9vdFNjb3BlLmN1cnJlbnRVc2VyUmVmLmNoaWxkKFwidGltZXNoZWV0cy8jeyRzY29wZS5jdXJyZW50VGltZVNoZWV0S2V5fS9sZXNzb25zLyN7aWR9XCIpLnNldCBudWxsXG5cbiAgICAgICRzY29wZS5zdWJtaXRUaW1lU2hlZXQgPSAoKSAtPlxuICAgICAgICByZXN1bHQgPSBjb25maXJtKFwiQXJlIHlvdSBzdXJlPyBZb3UgYXJlIGZpbmFsaXppbmcgeW91ciB0aW1lc2hlZXQgZm9yIHRoaXMgcGF5IHBlcmlvZC4gVGhpcyBhY3Rpb24gY2Fubm90IGJlIHVuZG9uZS5cIilcbiAgICAgICAgaWYgcmVzdWx0XG4gICAgICAgICAgJHJvb3RTY29wZS5jdXJyZW50VXNlclJlZi5jaGlsZChcInRpbWVzaGVldHMvI3skc2NvcGUuY3VycmVudFRpbWVTaGVldEtleX0vc3VibWl0dGVkXCIpLnNldCB0cnVlXG5cbiAgICAgICAgICB0b3RhbFRpbWUgPSAwLjAwXG4gICAgICAgICAgYW5ndWxhci5mb3JFYWNoICRzY29wZS5jdXJyZW50VGltZVNoZWV0LCAodmFsdWUsIGtleSkgLT5cbiAgICAgICAgICAgIHRvdGFsVGltZSA9IHRvdGFsVGltZSArIHBhcnNlRmxvYXQodmFsdWUubGVuZ3RoKVxuICAgICAgICAgICAgJHJvb3RTY29wZS5yb290UmVmLmNoaWxkKFwicGFyZW50cy8je3ZhbHVlLnN0dWRlbnQucGFyZW50LnBhcmVudElkfS9pbnZvaWNlcy8jeyRzY29wZS5jdXJyZW50VGltZVNoZWV0S2V5fVwiKS5wdXNoKCkuc2V0IHtyZWNvcmRlZERhdGU6IHZhbHVlLnJlY29yZGVkRGF0ZSxkYXRlOiB2YWx1ZS5kYXRlLCBzdHVkZW50TmFtZTogdmFsdWUuc3R1ZGVudC5uYW1lLCBsZW5ndGg6IHZhbHVlLmxlbmd0aCwgbm90ZXM6IHZhbHVlLm5vdGVzLCBtZW50b3JJZDogJHJvb3RTY29wZS5jdXJyZW50VWlkLCBtZW50b3JOYW1lOiBcIiN7JHJvb3RTY29wZS51c2VyQmFzaWMuZmlyc3ROYW1lfSAjeyRyb290U2NvcGUudXNlckJhc2ljLmxhc3ROYW1lfVwifVxuXG4gICAgICAgICAgJHJvb3RTY29wZS5jdXJyZW50VXNlclJlZi5jaGlsZChcInRpbWVzaGVldHMvI3skc2NvcGUuY3VycmVudFRpbWVTaGVldEtleX0vdG90YWxUaW1lXCIpLnNldCB0b3RhbFRpbWVcbiAgICAgICAgICAkcm9vdFNjb3BlLmN1cnJlbnRVc2VyUmVmLmNoaWxkKFwidGltZXNoZWV0cy8jeyRzY29wZS5jdXJyZW50VGltZVNoZWV0S2V5fVwiKS5zZXRQcmlvcml0eSAnc3VibWl0dGVkJ1xuXG5cbiAgICAgICRzY29wZS5tYW5hZ2VNZW50b3IgPSAodXNlcmlkLCBtZW50b3IpIC0+XG4gICAgICAgICRzY29wZS5zaG93TWFuYWdlTWVudG9yID0gdHJ1ZVxuICAgICAgICAkc2NvcGUuc2hvd01hbmFnZU1lbnRvck9iaiA9IG1lbnRvclxuXG5cbiAgICAgICRzY29wZS5jYWxjdWxhdGVUb3RhbEhvdXJzRm9yQVBhcmVudCA9IChsZXNzb25zKSAtPlxuICAgICAgICB0b3RhbEhvdXJzID0gMFxuICAgICAgICBmb3Igayx2IG9mIGxlc3NvbnNcbiAgICAgICAgICB0b3RhbEhvdXJzID0gcGFyc2VGbG9hdCh2Lmxlbmd0aCkgKyB0b3RhbEhvdXJzXG4gICAgICAgIHRvdGFsSG91cnNcblxuICAgICAgJHNjb3BlLm1hbmFnZVBhcmVudCA9ICh1c2VyaWQsIHBhcmVudCkgLT5cbiAgICAgICAgJHNjb3BlLnNob3dNYW5hZ2VQYXJlbnQgPSB0cnVlXG4gICAgICAgICRzY29wZS5zaG93TWFuYWdlUGFyZW50T2JqID0gcGFyZW50XG5cblxuICAgICAgJHNjb3BlLmNoZWNrQ3VycmVudFBheVBlcmlvZCA9ICgpIC0+XG4gICAgICAgIG1vbWVudCgpLmlzQmV0d2Vlbigkc2NvcGUuc3RhcnREYXRlLCAkc2NvcGUuZW5kRGF0ZSlcblxuXG4gICAgICAkc2NvcGUuY29udmVydFRvQXJyYXkgPSAob2JqKSAtPlxuICAgICAgICBfLnRvQXJyYXkob2JqKVxuXG5cblxuICBEYXNoQm9hcmRDb250cm9sbGVyLiRpbmplY3QgPSBbXCIkc2NvcGVcIiwgXCIkcm9vdFNjb3BlXCIsIFwiJHNjZVwiLCBcIkZpcmViYXNlU2VydmljZVwiLCBcIiR3aW5kb3dcIiwgXCIkZmlyZWJhc2VPYmplY3RcIiwgXCIkZmlyZWJhc2VBcnJheVwiXVxuXG4gIFRpbWVTaGVldEFwcC5jb250cm9sbGVyICdEYXNoQm9hcmRDb250cm9sbGVyJywgRGFzaEJvYXJkQ29udHJvbGxlclxuXG4gIERhc2hCb2FyZENvbnRyb2xsZXIiXX0=
